{"version":3,"sources":["../../src/pages/Consultationlist/Consultationlist.ts","../../src/pages/Report_write/Report_write.ts","../../src/pages/Collaborativelist/Collaborativelist.ts","../../src/pages/Report_view/Report_view.ts","../../src/pages/study-viewer/study-viewer.ts","../../src/pages/components/image-viewer/common/CGSize.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/list/list.ts","../../src/pages/Report_view/report.ts","../../src/pages/components/image-viewer/common/OperationScope.ts","../../src/pages/components/image-viewer/common/UIImageOrientation.ts","../../src/pages/components/image-viewer/roi/AngleRoiTool.ts","../../src/pages/study-viewer/popovers/relayout-viewer/relayout-viewer.ts","../../src/pages/study-viewer/popovers/preset-viewer/preset-viewer.ts","../../src/pages/study-viewer/popovers/measure-viewer/measure-viewer.ts","../../src/pages/study-viewer/popovers/roi-viewer/roi-viewer.ts","../../src/pages/study-viewer/popovers/orient-viewer/orient-viewer.ts","../../src/pages/Settings/Settings.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/service/login.service.ts","../../src/pages/components/image-viewer/Config.ts","../../src/pages/home/home.ts","../../src/app/app.constants.ts","../../src/pages/home/UserInfo.ts","../../src/pages/components/image-viewer/ImageViewer.ts","../../src/pages/components/image-viewer/common/CGPoint.ts","../../src/pages/components/image-viewer/viewer/ImageBoxView.ts","../../src/pages/components/image-viewer/viewer/TileView.ts","../../src/pages/components/image-viewer/roi/AngleRoi.ts","../../src/pages/components/image-viewer/display/DisplaySet.ts","../../src/pages/components/image-viewer/display/PresentationImage.ts","../../src/pages/components/image-viewer/dto/RetrieveImageRequest.ts","../../src/pages/components/image-viewer/common/ImageOrientType.ts","../../src/pages/components/image-viewer/common/EventDispatcher.ts","../../src/pages/components/image-viewer/common/ArrayUtils.ts","../../src/pages/components/image-viewer/model/Frame.ts","../../src/pages/components/image-viewer/loader/StreamJSONStudyLoader.ts","../../src/pages/components/image-viewer/roi/LinearRoiTool.ts","../../src/pages/components/image-viewer/roi/LinearRoi.ts","../../src/service/login_DB.service.ts","../../src/pages/study-viewer/popovers/scope-viewer/scope-viewer.ts","../../src/pages/components/image-viewer/common/ImageOperatingType.ts","../../src/pages/components/image-viewer/roi/RoiUtil.ts","../../src/pages/components/image-viewer/common/CGRect.ts","../../src/pages/components/image-viewer/common/Aesthetics.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController,AlertController,ToastController } from 'ionic-angular';\nimport { LoginService } from '../../service/login.service';\nimport  { Patient } from \"../Collaborativelist/patient\";\nimport { Report_writelist} from  '../Report_write/Report_write';\nimport { Report_viewlist } from \"../Report_view/Report_view\";\nimport { HomePage } from \"../home/home\";\n\n@Component({\n  selector: 'page-Consultationlist',\n  templateUrl: 'Consultationlist.html'\n})\nexport class Consultation_listPage {\n\n\t  errorMessage: string;\n      patient_list : Array<Patient> = [];\n      private search_continue:boolean=true;\n      private page : number = 1;//\n      private consult_state: string = \"\";\n      private request_date_start : string = \"\";\n      private request_date_end :string = \"\";\n\t  private request_type:string = \"Consult\";\n\t  private totalRecord: number = 0;\n\n  constructor(public navCtrl: NavController,\n              public alertCtrl: AlertController,\n              private login_service:LoginService,\n              private readonly toastCtrl: ToastController\n              ) {\n\t\t\t\tthis.search();\n\t\t\t  }//\n\n\tclear() {\n\t\tthis.consult_state = \"\";\n\t\tthis.request_date_start = \"\";\n\t\tthis.request_date_end = \"\";\n\t}\n\n  Scrollserch(){\n      this.login_service.query(this.request_type, String(this.page),this.consult_state,this.request_date_start,this.request_date_end)  //\n        .subscribe(\n          res  => {if (String(res['status']) == 'Success') {\n\t\t\t  for (var n in res[\"requestList\"])\n\t\t\t  {this.patient_list.push(res[\"requestList\"][n])};\n\t\t\t\tconsole.log(this.patient_list);\n\t\t\t\tthis.totalRecord = res[\"totalRecord\"];\n\t\t\t} else if (String(res['status']) == 'Logged_out') {\n\t\t\t\tthis.navCtrl.push(HomePage);\n\t\t\t}\n\t\t  }, error =>  this.errorMessage = <any>error);\n    }\n\n    search(){\n      this.patient_list = [];//search\n      this.page = 1;\n      this.search_continue=true;\n      this.login_service.query(this.request_type, String(this.page),this.consult_state,this.request_date_start,this.request_date_end)  //\n            .subscribe(\n\t\t\t  res  => {if (String(res['status']) == 'Success') {\n\t\t\t\t  for (var n in res[\"requestList\"])\n\t\t\t\t  {this.patient_list.push(res[\"requestList\"][n])};\n\t\t\t\t\tconsole.log(this.patient_list);\n\t\t\t\t\tthis.totalRecord = res[\"totalRecord\"];\n\t\t\t\t} else if (String(res['status']) == 'Logged_out') {\n\t\t\t\t\tthis.navCtrl.push(HomePage);\n\t\t\t\t}\n\t\t\t  }, error =>  this.errorMessage = <any>error);\n      }\n\n    init(patient){\n\n    }\n    view(patient){\n\t  if (patient['dicom_ready'] == '') {\n\t\tthis.onError('');\n\t\treturn;\n\t  }\n\t  patient['request_type'] = this.request_type;\n      if(patient[\"consult_state\"]==\"\"){\n        this.navCtrl.push(Report_viewlist,patient);\n      }else {\n        this.navCtrl.push(Report_writelist,patient);\n      }\n      console.log(\" ( ' - ')\");\n    }\n\n\n  private onError(text) {\n    let message: string = text;\n\n    const toast = this.toastCtrl.create({\n      message,\n      duration: 2000,\n      position: 'bottom'\n    });\n\n    toast.present();\n  }\n\n  doInfinite(infiniteScroll) {\n    console.log('Begin async operation');\n    setTimeout(() => {\n      let curr_length:number = this.patient_list.length;\n      if(this.search_continue){                       //get\n      this.page++;\n      this.Scrollserch();}\n      if(this.totalRecord == this.patient_list.length){\n        this.search_continue=false;\n        this.onError('');\n      }\n      console.log('Async operation has ended');\n      infiniteScroll.complete();\n    }, 500);\n\n    }\n\n\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Consultationlist/Consultationlist.ts","import { Component } from '@angular/core';\nimport { NavController,AlertController,ToastController,NavParams } from 'ionic-angular';\nimport { LoginService } from '../../service/login.service';\nimport { Patient }from \"../Collaborativelist/patient\";\nimport { Report } from \"../Report_view/report\";\nimport { HomePage } from \"../home/home\";\nimport { Collaborative_listPage } from \"../Collaborativelist/Collaborativelist\";\nimport { Consultation_listPage } from \"../Consultationlist/Consultationlist\";\ndeclare function utf8to16(url:string);\nimport { Patitentxml } from \"../../app/app.constants\";\nimport { StudyViewerPage } from \"../study-viewer/study-viewer\";\n\n\n@Component({\n  selector: 'page-Report_write',\n  templateUrl: 'Report_write.html'\n})\nexport class Report_writelist {\n  patient : Patient;\n  report: Report;\n  errorMessage: string;\n  reportvalue:any;\n  requestvalue:any;\n  report_date:string;\n  current_user:string;\n  report_content:string;\n  user_name:string;\n\n  constructor(public navCtrl: NavController,\n              private navParams: NavParams,\n              //private user: HomePage,\n              private login_service:LoginService) {\n    this.patient = navParams.data;\n\tif (this.patient.request_type == 'Consult') {\n\t\tthis.patient.request_type_chn = \"\";\n\t} else if (this.patient.request_type == 'CDO') {\n\t\tthis.patient.request_type_chn = \"\";\n\t}\n\tif (this.patient.reportlist !== undefined && this.patient.reportlist !== null) {\n\t\tif (this.patient.reportlist.length == 1) {\n\t\t\tthis.report = this.patient.reportlist[0];\n\t\t} else if (this.patient.reportlist.length == 2) {\n\t\t\tfor (var n in this.patient.reportlist) {\n\t\t\t\tif (this.patient.reportlist[n].auditing != '') {\n\t\t\t\t\tthis.report = this.patient.reportlist[n];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (this.report == undefined || this.report == null) {\n\t\tthis.report = new Report();\n\t}\n    this.report_content = `${Patitentxml}`;    //copy\n    console.log(this.patient);\n    //this.buildXml();\n  }\n  //\n  //   init(){\n  //     this.login_service.Report_query(this.report.auditing,this.report.report_no)\n  //       .subscribe(\n  //         res=>{this.report.report_content=utf8to16(window.atob(res[\"report\"][\"report_content\"]));this.buildXml();\n  //           },\n  //         error=>this.errorMessage = <any>error);\n  //   }\n\n  Return(){\n    this.navCtrl.pop();\n  }\n\n  openimage(study) {\n\tthis.navCtrl.push(StudyViewerPage, {item : study.rr_study_uid});\n  }\n\n  buildXml() {\n    this.report_date = this.Format(new Date(), \"yyyy-MM-dd hh:mm:ss\");\n\n    if (this.patient.dest_hospital_name !== undefined\n      && this.patient.dest_hospital_name !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<patient_hospital_value></patient_hospital_value>\",\n          \"<patient_hospital_value>\"\n          + this.patient.dest_hospital_name\n          + \"</patient_hospital_value>\")\n    }\n    if (this.patient.pat_id !== undefined\n      && this.patient.pat_id !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<patient_pid_value></patient_pid_value>\",\n          \"<patient_pid_value>\"\n          + this.patient.pat_id\n          + \"</patient_pid_value>\")\n    }\n    if (this.patient.pat_name !== undefined\n      && this.patient.pat_name !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<patient_name_value></patient_name_value>\",\n          \"<patient_name_value>\"\n          + this.patient.pat_name\n          + \"</patient_name_value>\")\n    }\n    if (this.patient.pat_sex !== undefined\n      && this.patient.pat_sex !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<patient_sex_value></patient_sex_value>\",\n          \"<patient_sex_value>\"\n          + this.patient.pat_sex\n          + \"</patient_sex_value>\")\n    }\n    if (this.patient.pat_birth_str !== undefined\n      && this.patient.pat_birth_str !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<patient_birthday_date></patient_birthday_date>\",\n          \"<patient_birthday_date>\"\n          + this.patient.pat_birth_str\n          + \"</patient_birthday_date>\")\n    }\n    if (this.patient.pat_age !== undefined\n      && this.patient.pat_age !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<age_value></age_value>\",\n          \"<age_value>\"\n          + this.patient.pat_age\n          + \"</age_value>\")\n    }\n    if (this.patient.reqou_name !== undefined\n      && this.patient.reqou_name !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<dept_no_value></dept_no_value>\",\n          \"<dept_no_value>\"\n          + this.patient.reqou_name\n          + \"</dept_no_value>\")\n    }\n    if (this.patient.clinical_symptoms !== undefined\n      && this.patient.clinical_symptoms !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<symptom_value></symptom_value>\",\n          \"<symptom_value>\"\n          + this.patient.clinical_symptoms\n          + \"</symptom_value>\")\n    }\n    if (this.patient.clinical_diagnosis !== undefined\n      && this.patient.clinical_diagnosis !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<diagnoses_value></diagnoses_value>\",\n          \"<diagnoses_value>\"\n          + this.patient.clinical_diagnosis\n          + \"</diagnoses_value>\")\n    }\n    if (this.patient.bodypart !== undefined\n      && this.patient.bodypart !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<check_part_value></check_part_value>\",\n          \"<check_part_value>\"\n          + this.patient.bodypart\n          + \"</check_part_value>\")\n    }\n    if (this.patient.image_symptoms !== undefined\n      && this.patient.image_symptoms !== null) {\n      this.report.report_content = this.report.report_content\n        .replace(\n          \"<report_content_value></report_content_value>\",\n          \"<report_content_value>\"\n          + this.patient.image_symptoms\n          + \"</report_content_value>\")\n    }\n    if (this.patient.image_diagnosis !== undefined\n      && this.patient.image_diagnosis !== null) {\n      this.report.report_content = this.report.report_content\n        .replace(\n          \"<report_conclusion_value></report_conclusion_value>\",\n          \"<report_conclusion_value>\"\n          + this.patient.image_diagnosis\n          + \"</report_conclusion_value>\")\n    }\n    if (this.patient.reqdoc_name !== undefined\n      && this.patient.reqdoc_name !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<exam_doctor_value></exam_doctor_value>\",\n          \"<exam_doctor_value>\"\n          + this.patient.reqdoc_name\n          + \"</exam_doctor_value>\")\n    }\n    if (localStorage.getItem(\"displayname\") !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<report_doctor_value></report_doctor_value>\",\n          \"<report_doctor_value>\"\n          + localStorage.getItem(\"displayname\")\n          + \"</report_doctor_value>\")\n    }\n    if (this.report_date !== undefined\n      && this.report_date !== null) {\n      this.report_content = this.report_content\n        .replace(\n          \"<report_date_value></report_date_value>\",\n          \"<report_date_value>\"\n          + this.report_date\n          + \"</report_date_value>\")\n    }\n\n\tif (this.patient.request_type == 'Consult') {\n\t\tthis.report.auditing = \"Y\";\n\t} else if (this.patient.request_type == 'CDO') {\n\t\tthis.report.auditing = \"C\";\n\t}\n\n    this.reportvalue={\n      auditing:this.report.auditing,\n      auditor_name:localStorage.getItem(\"displayname\"),\n      auditor_no:localStorage.getItem(\"userno\"),\n      conclusion:this.report.conclusion,\n      content:this.report.content,\n      hospital_id:this.patient.dest_hospital_id,\n      report_content:this.report_content,\n      report_date:this.report_date,\n      request_no:this.patient.request_no\n    };\n\n\tthis.requestvalue = {\n\t  request_no:this.patient.request_no\n\t};\n\n  }\n\n\tSubmit() {\n\t\tthis.buildXml();\n\t\tconsole.log(this.reportvalue);\n\t\tconsole.log(this.requestvalue);\n\t\tthis.login_service.save(this.reportvalue)  //\n\t\t\t\t.subscribe(\n\t\t\t\tres  => {if(String(res.status)  ==\"Success\"){\n\t\t\t\t\tthis.login_service.submit(this.requestvalue)\n\t\t\t\t\t\t.subscribe(\n\t\t\t\t\t\t\tres  => {if(String(res.status)==\"Success\"){\n\t\t\t\t\t\t\t\tif (this.patient.request_type == 'Consult') {\n\t\t\t\t\t\t\t\t\tthis.navCtrl.push(Consultation_listPage);\n\t\t\t\t\t\t\t\t} else if (this.patient.request_type == 'CDO') {\n\t\t\t\t\t\t\t\t\tthis.navCtrl.push(Collaborative_listPage);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (String(res.status)==\"Failure\") {\n\t\t\t\t\t\t\t\tthis.onError(res.errorCode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, error => this.errorMessage = <any>error);\n\t\t\t\t} else if(String(res.status)==\"Logged_out\") {\n\t\t\t\t\tthis.navCtrl.push(HomePage);\n\t\t\t\t} else if(String(res.status)==\"Failure\") {\n\t\t\t\t\tthis.onError(res.errorCode);\n\t\t\t\t}},\n\t\t\t\terror =>  this.errorMessage = <any>error);\n    }\n\n\tprivate onError(message) {\n\t\tlet message: string ='';\n\n\t\tconst toast = this.toastCtrl.create({\n\t\t  message,\n\t\t  duration: 2000,\n\t\t  position: 'bottom'\n\t\t});\n\n\t\ttoast.present();\n\t}\n\n\tprivate Format(date, fmt) { // author: meizz\n\t\tvar o = {\n\t\t\t\"M+\": date.getMonth() + 1, // \n\t\t\t\"d+\": date.getDate(), // \n\t\t\t\"h+\": date.getHours(), // \n\t\t\t\"m+\": date.getMinutes(), // \n\t\t\t\"s+\": date.getSeconds(), // \n\t\t\t\"q+\": Math.floor((date.getMonth() + 3) / 3), // \n\t\t\t\"S\": date.getMilliseconds() // \n\t\t};\n\t\tif (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\t\tfor (var k in o)\n\t\t\tif (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n\t\treturn fmt;\n\t}\n}\n\n\n//\n//post\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Report_write/Report_write.ts","import { Component } from '@angular/core';\nimport { NavController,AlertController,ToastController } from 'ionic-angular';\nimport { LoginService } from '../../service/login.service';\nimport  { Patient } from \"./patient\";\nimport { Report_writelist} from  '../Report_write/Report_write';\nimport { Report_viewlist } from \"../Report_view/Report_view\";\nimport { HomePage } from \"../home/home\";\n\n@Component({\n  selector: 'page-Collaborativelist',\n  templateUrl: 'Collaborativelist.html'\n})\nexport class Collaborative_listPage {\n      errorMessage: string;\n      patient_list : Array<Patient> = [];\n      private search_continue:boolean=true;\n      private page : number = 1;//\n      private consult_state: string = \"\";\n      private request_date_start : string = \"\";\n      private request_date_end :string = \"\";\n\t  private request_type:string = \"CDO\";\n\t  private totalRecord: number = 0;\n\t  private mycolor:string;\n\n  constructor(public navCtrl: NavController,\n              public alertCtrl: AlertController,\n              private login_service:LoginService,\n              private readonly toastCtrl: ToastController\n              ) {\n\t\t\t\tthis.search();\n\t\t\t  }//\n\n\tclear() {\n\t\tthis.consult_state = \"\";\n\t\tthis.request_date_start = \"\";\n\t\tthis.request_date_end = \"\";\n\t}\n\n    Scrollserch(){\n      this.login_service.query(this.request_type, String(this.page),this.consult_state,this.request_date_start,this.request_date_end)  //\n        .subscribe(\n          res  => {if (String(res['status']) == 'Success') {\n\t\t\t  for (var n in res[\"requestList\"])\n\t\t\t  {this.patient_list.push(res[\"requestList\"][n])};\n\t\t\t\tconsole.log(this.patient_list);\n\t\t\t\tthis.totalRecord = res[\"totalRecord\"];\n\t\t\t} else if (String(res['status']) == 'Logged_out') {\n\t\t\t\tthis.navCtrl.push(HomePage);\n\t\t\t}\n\t\t  }, error =>  this.errorMessage = <any>error);\n    }\n\n    search(){\n      this.patient_list = [];//search\n      this.page = 1;\n      this.search_continue=true;\n      this.login_service.query(this.request_type, String(this.page),this.consult_state,this.request_date_start,this.request_date_end)  //\n            .subscribe(\n            res  => {if (String(res['status']) == 'Success') {\n\t\t\t  for (var n in res[\"requestList\"])\n\t\t\t\t  {this.patient_list.push(res[\"requestList\"][n])};\n\t\t\t\t\tconsole.log(this.patient_list);\n\t\t\t\t\tthis.totalRecord = res[\"totalRecord\"];\n\t\t\t\t} else if (String(res['status']) == 'Logged_out') {\n\t\t\t\t\tthis.navCtrl.push(HomePage);\n\t\t\t\t}\n\t\t\t}, error =>  this.errorMessage = <any>error);\n      }\n\n\n      init(patient){\n      if(patient[\"priority_str\"]==\"\"){\n        this.mycolor = \"danger\";\n      }else{\n        this.mycolor = \"danger\";\n      }\n      }\n\n    view(patient){\n\t  if (patient['dicom_ready'] == '') {\n\t\tthis.onError('');\n\t\treturn;\n\t  }\n\t  patient['request_type'] = this.request_type;\n      if(patient[\"consult_state\"]==\"\"){\n        this.navCtrl.push(Report_viewlist,patient);\n      }else {\n        this.navCtrl.push(Report_writelist,patient);\n      }\n      console.log(\" ( ' - ')\");\n    }\n\n\n  private onError(text) {\n    let message: string = text;\n\n    const toast = this.toastCtrl.create({\n      message,\n      duration: 2000,\n      position: 'bottom'\n    });\n\n    toast.present();\n  }\n\n  doInfinite(infiniteScroll) {\n    console.log('Begin async operation');\n    setTimeout(() => {\n      if(this.search_continue){                       //get\n      this.page++;\n      this.Scrollserch();}\n      if(this.totalRecord == this.patient_list.length){\n        this.search_continue=false;\n        this.onError('');\n      }\n      console.log('Async operation has ended');\n      infiniteScroll.complete();\n    }, 500);\n\n    }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Collaborativelist/Collaborativelist.ts","import { Component } from '@angular/core';\nimport { NavController,AlertController,ToastController,NavParams } from 'ionic-angular';\nimport { LoginService } from '../../service/login.service';\nimport { Patient }from \"../Collaborativelist/patient\";\nimport { Report } from \"./report\";\nimport {StudyViewerPage} from \"../study-viewer/study-viewer\";\ndeclare function utf8to16(url:string);\n\n\n@Component({\n  selector: 'page-Report_view',\n  templateUrl: 'Report_view.html'\n})\nexport class Report_viewlist {\n  errorMessage: string;\n  patient:Patient;\n  report:Report;\n  auditing:string;    //\n  report_no:string;  //\n  report_conclusion_value:string;\n  report_content_value:string;\n\n  constructor(public navCtrl: NavController,\n              private navParams: NavParams,\n              private login_service:LoginService) {\n\n    this.patient = navParams.data;\n\tconsole.log(this.patient);\n\tif (this.patient.request_type == 'Consult') {\n\t\tthis.patient.request_type_chn = \"\";\n\t} else if (this.patient.request_type == 'CDO') {\n\t\tthis.patient.request_type_chn = \"\";\n\t}\n    if (this.patient.reportlist !== undefined && this.patient.reportlist !== null) {\n\t\tif (this.patient.reportlist.length == 1) {\n\t\t\tthis.report = this.patient.reportlist[0];\n\t\t} else if (this.patient.reportlist.length == 2) {\n\t\t\tfor (var n in this.patient.reportlist) {\n\t\t\t\tif (this.patient.reportlist[n].auditing != '') {\n\t\t\t\t\tthis.report = this.patient.reportlist[n];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (this.report == undefined || this.report == null) {\n\t\tthis.report = new Report();\n\t}\n  }\n\n  Return(){\n    this.navCtrl.pop();\n  }\n  \n  openimage(study) {\n\tthis.navCtrl.push(StudyViewerPage, {item : study.rr_study_uid});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Report_view/Report_view.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture, Popover} from 'ionic-angular';\r\nimport {ImageViewer} from \"../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../app/app.constants\";\r\nimport {ReLayoutPopoverPage} from \"./popovers/relayout-viewer/relayout-viewer\";\r\nimport {PresetPopoverPage} from \"./popovers/preset-viewer/preset-viewer\";\r\nimport {MeasurePopoverPage} from \"./popovers/measure-viewer/measure-viewer\";\r\nimport {RoiPopoverPage} from \"./popovers/roi-viewer/roi-viewer\";\r\nimport {OrientPopoverPage} from \"./popovers/orient-viewer/orient-viewer\";\r\n\r\n/*\r\n Generated class for the CaseDetail page.\r\n\r\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n Ionic pages and navigation.\r\n */\r\n@Component({\r\n  selector: 'page-study-viewer',\r\n  templateUrl: 'study-viewer.html'\r\n})\r\nexport class StudyViewerPage {\r\n  studyUID;\r\n  tabBarElement: any;\r\n  viewport : any;\r\n  mr1 : any;\r\n\r\n  @ViewChild('dicomViewer')\r\n  private _dicomViewer: ElementRef;\r\n\r\n  @ViewChild('popoverContent', { read: ElementRef }) content: ElementRef;\r\n  @ViewChild('popoverText', { read: ElementRef }) text: ElementRef;\r\n\r\n  private imageViewer : ImageViewer;\r\n  private popover : Popover;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public popoverCtrl: PopoverController) {\r\n    this.studyUID = navParams.data.item;\r\n    this.tabBarElement = document.querySelector('.tabbar');\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.tabBarElement.style.display = 'none';\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.tabBarElement.style.display = 'flex';\r\n    if(this.imageViewer){\r\n      this.imageViewer.clear();\r\n    }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad StudyViewerPage');\r\n\r\n    //to call the DICOM Viewer\r\n    // var mr1 = cornerstone.enable(document.getElementById('mr1'));\r\n    let dicomViewerElement = this._dicomViewer.nativeElement;\r\n\r\n    console.log('Get the dicom Viewer Element to display the study');\r\n\r\n\tvar axvsurl = AXVS_SERVER_ADDRESS;\r\n\tif (localStorage.getItem(\"axvsurl\") != null) {\r\n\t\taxvsurl = localStorage.getItem(\"axvsurl\");\r\n\t}\r\n    this.imageViewer = new ImageViewer(dicomViewerElement,this.studyUID,'status',axvsurl,'doctor','doctor');\r\n\r\n    this.imageViewer.display();\r\n\r\n    window.addEventListener('resize', () => {\r\n      console.log('resize the image viewer');\r\n      this.imageViewer.resize();\r\n    }, false);\r\n\r\n  }\r\n  //reset the study viewer\r\n  reset() {\r\n    this.imageViewer.reset();\r\n  }\r\n\r\n  //pop up the relayout page\r\n  presentReLayoutPopover(ev) {\r\n    this.popover = this.popoverCtrl.create(ReLayoutPopoverPage,{imageViewer: this.imageViewer, studyViewer: this});\r\n    this.popover.present({\r\n      ev: ev\r\n    });\r\n  }\r\n\r\n  //pop up the preset page\r\n  presentPresetPopover(ev) {\r\n    this.popover = this.popoverCtrl.create(PresetPopoverPage,{imageViewer: this.imageViewer, studyViewer: this});\r\n    this.popover.present({\r\n      ev: ev\r\n    });\r\n  }\r\n\r\n  //pop up the tool page\r\n  presentMeasurePopover(ev) {\r\n    this.popover = this.popoverCtrl.create(MeasurePopoverPage,{imageViewer: this.imageViewer, studyViewer: this});\r\n    this.popover.present({\r\n      ev: ev\r\n    });\r\n  }\r\n\r\n  presentOrientPopover(ev){\r\n    this.popover = this.popoverCtrl.create(OrientPopoverPage,{imageViewer: this.imageViewer, studyViewer: this});\r\n    this.popover.present({\r\n      ev: ev\r\n    });\r\n  }\r\n\r\n  //pop up the roi page\r\n  presentRoiPopover(ev) {\r\n    this.popover = this.popoverCtrl.create(RoiPopoverPage,{imageViewer: this.imageViewer, studyViewer: this});\r\n    this.popover.present({\r\n      ev: ev\r\n    });\r\n  }\r\n\r\n  dismiss(){\r\n    if(this.popover){\r\n      this.popover.dismiss();\r\n      this.popover = null;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/study-viewer.ts","/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class CGSize{\r\n  constructor(public width : number, public height : number){}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/CGSize.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 169;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 169\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 212;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 212\n// module chunks = 0","//tabs\nimport { Component } from '@angular/core';\nimport { Consultation_listPage } from '../Consultationlist/Consultationlist';\nimport { Collaborative_listPage } from \"../Collaborativelist/Collaborativelist\";\n\n\n@Component({\n  templateUrl: 'list.html'\n})\nexport class ListPage {//\n  // this tells the tabs component which Pages\n  // should be each tab's root Page\n  tab1Root: any = Consultation_listPage;\n  tab2Root: any = Collaborative_listPage;\n\n\n  constructor() {\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.ts","export class Report{\n  auditing:string;\n  report_no:string;\n  report_content:string;\n  conclusion:string;\n  content:string;\n  auditor_name:string;\n  auditor_no:string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Report_view/report.ts","/**\r\n * Created by kai on 22/10/2017.\r\n */\r\nexport enum OperationScope{\r\n  StudyScope,\r\n  SeriesScope,\r\n  ImageScope\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/OperationScope.ts","/**\r\n * Created by binsirMac on 2017-01-05.\r\n */\r\nexport enum UIImageOrientation{\r\n  UIImageOrientationUp,            // default orientation\r\n  UIImageOrientationDown,          // 180 deg rotation\r\n  UIImageOrientationLeft,          // 90 deg CCW\r\n  UIImageOrientationRight,         // 90 deg CW\r\n  UIImageOrientationUpMirrored,    // as above but image mirrored along other axis. horizontal flip\r\n  UIImageOrientationDownMirrored,  // horizontal flip\r\n  UIImageOrientationLeftMirrored,  // vertical flip\r\n  UIImageOrientationRightMirrored, // vertical flip\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/UIImageOrientation.ts","import {RoiTool} from \"./RoiTool\";\r\nimport {TileView} from \"../viewer/TileView\";\r\nimport {RoiUtil} from \"./RoiUtil\";\r\nimport {LFService} from \"typescript-logging\";\r\nimport {AngleRoi} from \"./AngleRoi\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {Aesthetics} from \"../common/Aesthetics\";\r\n\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"AngleRoiTool\");\r\n/**\r\n * Created by kai on 16/10/2017.\r\n */\r\nexport class AngleRoiTool implements RoiTool{\r\n\r\n  private static instance:AngleRoiTool = new AngleRoiTool();\r\n\r\n  private drawing:boolean =false;\r\n\r\n  static shareAngleRoiTool():AngleRoiTool{\r\n    return AngleRoiTool.instance;\r\n  }\r\n\r\n  private trackingTouches:Array<CGPoint> = new Array();\r\n\r\n  removeAllPoint(){\r\n    this.trackingTouches = new Array();\r\n  }\r\n\r\n  isDrawing():boolean{\r\n    return this.drawing;\r\n  }\r\n  clearRoiTool(){\r\n    this.removeAllPoint();\r\n  }\r\n\r\n  touchesBegan(touch:CGPoint, touchedTileView:TileView){\r\n    logger.info('begin to draw the angel');\r\n    if(this.trackingTouches.length == 0){\r\n      this.drawing = true;\r\n      // this.trackingTouches.push(touch);\r\n    }\r\n  }\r\n\r\n  touchesCancelled(touch:CGPoint, touchedTileView:TileView){\r\n  }\r\n\r\n  touchesMoved(touch:CGPoint, touchedTileView:TileView){\r\n\r\n  }\r\n\r\n  touchesEnded(touch:CGPoint, touchedTileView:TileView){\r\n    if(this.drawing){\r\n      this.trackingTouches.push(touch);\r\n    }\r\n\r\n    if(this.trackingTouches.length >= 3){\r\n      logger.info('draw the angel');\r\n      var angelRoi:AngleRoi = new AngleRoi(this.trackingTouches[0],this.trackingTouches[1],this.trackingTouches[2]);\r\n      touchedTileView.presentationImage.addRoi(angelRoi);\r\n      this.drawing = false;\r\n      this.removeAllPoint();\r\n    }\r\n  }\r\n\r\n  drawTemporaryIn(touchedTileView:TileView, context:CanvasRenderingContext2D){\r\n    this.trackingTouches.forEach((point, idx, array)=>{\r\n      RoiUtil.drawVertiexAt(point,context);\r\n    });\r\n    if(this.trackingTouches.length > 0){\r\n      context.lineWidth = Aesthetics.AxRoiSelectedLineWidth;\r\n\r\n      let firstVertexPoint = this.trackingTouches[0];\r\n      context.moveTo(firstVertexPoint.x, firstVertexPoint.y);\r\n\r\n      if(this.trackingTouches.length > 1) {\r\n        let secondVertexPoint = this.trackingTouches[1];\r\n        context.lineTo(secondVertexPoint.x, secondVertexPoint.y);\r\n\r\n        if (this.trackingTouches.length > 2) {\r\n          let thirdVertexPoint = this.trackingTouches[2];\r\n          context.lineTo(thirdVertexPoint.x, thirdVertexPoint.y);\r\n        }\r\n      }\r\n      context.stroke();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/roi/AngleRoiTool.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\nimport {Config} from \"../../../components/image-viewer/Config\";\r\n\r\n@Component({\r\n  selector: 'page-relayout-viewer',\r\n  templateUrl: 'relayout-viewer.html'\r\n})\r\nexport class ReLayoutPopoverPage {\r\n  imageViewer : any;\r\n  studyViewer : any;\r\n\r\n  seriesList : Array<any> = new Array<any>();\r\n\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n    if(this.imageViewer && this.imageViewer.displayedStudy) {\r\n      for (let series of this.imageViewer.displayedStudy.series) {\r\n        this.seriesList.push({\r\n          \"study\":this.imageViewer.displayedStudy,\"series\":series,\r\n          \"seriesDescription\":series.seriesDescription,\r\n          \"modality\":series.modality,\"seriesNumber\":series.seriesNumber,\"numberOfImages\":series.numberOfImages,\r\n          \"thumbnail\":`${Config.AXVS_ADDRESS}/services/thumbnail?studyUID=${this.imageViewer.displayedStudy.studyUID}&seriesUID=${series.seriesUID}&objectUID=${series.image[0].imageUID}&access_token=${Config.AXVS_ACCESS_TOKEN}`});\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/relayout-viewer/relayout-viewer.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\n\r\n@Component({\r\n  selector: 'page-preset-viewer',\r\n  templateUrl: 'preset-viewer.html'\r\n})\r\nexport class PresetPopoverPage {\r\n  private imageViewer : any;\r\n  private studyViewer : any;\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n  }\r\n\r\n  preset(presetType : number){\r\n    if (this.imageViewer){\r\n      let modality : string = this.imageViewer.selectedImageBoxView.currentDisplayedSeries.modality;\r\n      switch (presetType)\r\n      {\r\n        case 1:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(620,445);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(56,342);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(135,240);\r\n              break;\r\n          }\r\n          break;\r\n        case 2:\r\n\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(436,628);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(-498,1465);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(508,1450);\r\n              break;\r\n          }\r\n          break;\r\n        case 3:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(776,515);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(93,109);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(625,1410);\r\n              break;\r\n          }\r\n          break;\r\n        case 4:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(783,735);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(570,3077);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(519,775);\r\n              break;\r\n          }\r\n          break;\r\n        case 5:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(602,489);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(42,155);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(500,500);\r\n              break;\r\n          }\r\n          break;\r\n        case 6:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(625,646);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(111,195);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(600,600);\r\n              break;\r\n          }\r\n          break;\r\n        case 7:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(108,877);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(108,877);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(108,877);\r\n              break;\r\n          }\r\n          break;\r\n        case 8:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(56,342);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(56,342);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(56,342);\r\n              break;\r\n          }\r\n          break;\r\n        case 9:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(455,958);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(455,958);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(455,958);\r\n              break;\r\n          }\r\n          break;\r\n        case 10:\r\n          //icon_preset_abdomen_off\r\n          switch (modality)\r\n          {\r\n            case 'CR':\r\n            case 'DX':\r\n            case 'MG':\r\n              this.imageViewer.preset(747,727);\r\n              break;\r\n            case 'CT':\r\n              this.imageViewer.preset(747,727);\r\n              break;\r\n            case 'MR':\r\n            case 'RF':\r\n            case 'US':\r\n            case 'XA':\r\n              this.imageViewer.preset(747,727);\r\n              break;\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    this.studyViewer.dismiss();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/preset-viewer/preset-viewer.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\nimport {RoiUtil} from \"../../../components/image-viewer/roi/RoiUtil\";\r\nimport {AngleRoiTool} from \"../../../components/image-viewer/roi/AngleRoiTool\";\r\nimport {Config} from \"../../../components/image-viewer/Config\";\r\nimport {ImageOperatingType} from \"../../../components/image-viewer/common/ImageOperatingType\";\r\nimport {EventDispatcher, EventTypes} from \"../../../components/image-viewer/common/EventDispatcher\";\r\nimport {LinearRoiTool} from \"../../../components/image-viewer/roi/LinearRoiTool\";\r\n\r\n@Component({\r\n  selector: 'page-measure-viewer',\r\n  templateUrl: 'measure-viewer.html'\r\n})\r\nexport class MeasurePopoverPage {\r\n  imageViewer : any;\r\n  studyViewer : any;\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n  }\r\n\r\n  onClickPointMeasureButton(){\r\n  }\r\n\r\n  onClickElipseMeasureButton(){\r\n\r\n  }\r\n\r\n  onClickRectangleMeasureButton(){\r\n\r\n  }\r\n\r\n  onClickAngleMeasureButton(){\r\n    Config.imageOperatingType = ImageOperatingType.ImageOperatingTypeMeasure;\r\n    EventDispatcher.getInstance().dispatch(EventTypes.ChangeOperatingType, this, 'Get the change');\r\n\r\n    RoiUtil.setCurrentRoiTool(AngleRoiTool.shareAngleRoiTool());\r\n  }\r\n\r\n  onClickLineMeasureButton(){\r\n    Config.imageOperatingType = ImageOperatingType.ImageOperatingTypeMeasure;\r\n    EventDispatcher.getInstance().dispatch(EventTypes.ChangeOperatingType, this, 'Get the change');\r\n\r\n    RoiUtil.setCurrentRoiTool(LinearRoiTool.shareLinearRoiTool());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/measure-viewer/measure-viewer.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\n\r\n@Component({\r\n  selector: 'page-roi-viewer',\r\n  templateUrl: 'roi-viewer.html'\r\n})\r\nexport class RoiPopoverPage {\r\n  imageViewer : any;\r\n  studyViewer : any;\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/roi-viewer/roi-viewer.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\n\r\n@Component({\r\n  selector: 'page-orient-viewer',\r\n  templateUrl: 'orient-viewer.html'\r\n})\r\nexport class OrientPopoverPage {\r\n  imageViewer : any;\r\n  studyViewer : any;\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/orient-viewer/orient-viewer.ts","import { Component } from '@angular/core';\nimport { NavController,AlertController,ToastController } from 'ionic-angular';\nimport { HomePage } from '../home/home';\nimport { DOMAINRIS_SERVER_ADDRESS } from '../../app/app.constants';\nimport { AXVS_SERVER_ADDRESS } from '../../app/app.constants';\n\n\n@Component({\n  selector: 'page-Settings',\n  templateUrl: 'Settings.html'\n})\nexport class SettingsPage {\n    config = {\n\t\tdomainrisurl : '',\n\t\taxvsurl : ''\n\t}\n\n  constructor(public navCtrl: NavController,\n              public alertCtrl: AlertController,\n              private readonly toastCtrl: ToastController\n              ) {\n\t\t\t\tconsole.log(DOMAINRIS_SERVER_ADDRESS);\n\t\t\t\tif (localStorage.getItem(\"domainrisurl\") == null ) {\n\t\t\t\t\tthis.config.domainrisurl = DOMAINRIS_SERVER_ADDRESS;\n\t\t\t\t} else {\n\t\t\t\t\tthis.config.domainrisurl = localStorage.getItem(\"domainrisurl\");\n\t\t\t\t}\n\n\t\t\t\tif (localStorage.getItem(\"axvsurl\") == null || localStorage.getItem(\"axvsurl\").length == 0) {\n\t\t\t\t\tthis.config.axvsurl = AXVS_SERVER_ADDRESS;\n\t\t\t\t} else {\n\t\t\t\t\tthis.config.axvsurl = localStorage.getItem(\"axvsurl\");\n\t\t\t\t}\n\t\t\t  }//\n\n\tsave() {\n\t\tlocalStorage.setItem(\"domainrisurl\", this.config.domainrisurl);\n\t\tlocalStorage.setItem(\"axvsurl\", this.config.axvsurl);\n\t\tthis.navCtrl.push(HomePage);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Settings/Settings.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nimport 'hammerjs';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { HttpModule }    from '@angular/http';\n\n// Imports for loading & configuring the in-memory web api\n//import { InMemoryWebApiModule } from 'angular-in-memory-web-api';\n//import { InMemoryDataService }  from './in-memory-data.service';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport { ListPage } from '../pages/list/list';\nimport { SettingsPage } from '../pages/Settings/Settings';\n\nimport { Consultation_listPage } from '../pages/Consultationlist/Consultationlist';\nimport { Collaborative_listPage } from \"../pages/Collaborativelist/Collaborativelist\";\nimport { Report_writelist } from \"../pages/Report_write/Report_write\";\nimport { Report_viewlist} from \"../pages/Report_view/Report_view\";\n\nimport { FormsModule }   from '@angular/forms';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { LoginService } from '../service/login.service';\nimport { HeroService } from '../service/login_DB.service';\n\n//components\n//import {ElasticTextarea} from '../components/elasticTextarea';\n//import {ProfileHeader} from '../components/profileHeader';\n\n//viewer\nimport {StudyViewerPage} from \"../pages/study-viewer/study-viewer\";\nimport {ReLayoutPopoverPage} from \"../pages/study-viewer/popovers/relayout-viewer/relayout-viewer\";\nimport {PresetPopoverPage} from \"../pages/study-viewer/popovers/preset-viewer/preset-viewer\";\nimport {MeasurePopoverPage} from \"../pages/study-viewer/popovers/measure-viewer/measure-viewer\";\nimport {RoiPopoverPage} from \"../pages/study-viewer/popovers/roi-viewer/roi-viewer\";\nimport {OrientPopoverPage} from \"../pages/study-viewer/popovers/orient-viewer/orient-viewer\";\nimport {ScopePopoverPage} from \"../pages/study-viewer/popovers/scope-viewer/scope-viewer\";\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    ListPage,\n    Consultation_listPage,\n    Collaborative_listPage,\n    Report_writelist,\n    Report_viewlist,\n\tStudyViewerPage,\n    ReLayoutPopoverPage,\n    PresetPopoverPage,\n    MeasurePopoverPage,\n    RoiPopoverPage,\n    OrientPopoverPage,\n\tScopePopoverPage,\n    SettingsPage,\n  ],\n  imports: [\n    HttpModule,\n    //InMemoryWebApiModule.forRoot(InMemoryDataService),\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    FormsModule,\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    ListPage,\n    Consultation_listPage,\n    Collaborative_listPage,\n    Report_writelist,\n    Report_viewlist,\n\tStudyViewerPage,\n    ReLayoutPopoverPage,\n    PresetPopoverPage,\n    MeasurePopoverPage,\n    RoiPopoverPage,\n    OrientPopoverPage,\n\tScopePopoverPage,\n    SettingsPage,\n  ],\n  providers: [//\n    HeroService,\n    LoginService,\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Nav, Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\nimport { SettingsPage } from '../pages/Settings/Settings';\nimport { LoginService } from '../service/login.service';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage: any = HomePage;\n  errorMessage:string;\n  pages: Array<{title: string, component: any}>;\n\n  constructor(public platform: Platform, public statusBar: StatusBar, public splashScreen: SplashScreen, private login_service:LoginService) {\n    this.initializeApp();\n\n    // used for an example of ngFor and navigation\n    this.pages = [\n      { title: '', component: SettingsPage },\n    ];\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n    });\n  }\n\n  openPage(page) {\n    // Reset the content nav to have just this page\n    // we wouldn't want the back button to show in this scenario\n    this.nav.setRoot(page.component);\n  }\n\n  logout() {\n\tthis.login_service.logout()  //\n\t\t.subscribe(\n\t\t\tres  => {\n\t\t\t\tlocalStorage.removeItem(\"userid\");\n\t\t\t\tlocalStorage.removeItem(\"password\");\n\t\t\t\tthis.nav.setRoot(HomePage);},\n\t\t\terror =>  this.errorMessage = <any>error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {DOMAINRIS_SERVER_ADDRESS} from \"../app/app.constants\"; //\nimport { Injectable }    from '@angular/core';\nimport { Headers, Http, Response, RequestOptions,URLSearchParams } from '@angular/http';\nimport { Observable } from 'rxjs/Rx';\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\n\nimport 'rxjs/add/operator/toPromise';\n\nimport { UserInfo } from '../pages/home/UserInfo';\n\n@Injectable()\nexport class LoginService {\n\n  //private headers = new Headers({'Content-Type': 'application/json'});\n  private loginUrl_postfix = '/DomainRIS/services/account/login'; // URL to web loginAPI;\n  private logoutUrl_postfix = '/DomainRIS/services/account/logout';\n  private reportUrl_postfix = 'DomainRIS/services/report/query';\n  private searchUrl_postfix = '/DomainRIS/services/request/query';\n  private saveUrl_postfix = '/DomainRIS/services/report/save';\n  private submitUrl_postfix = '/DomainRIS/services/request/submit';\n\n    constructor(private http: Http) {\n\t}\n\n\t  save(report:any):Observable<Response> {\n\t\tvar saveUrl = this.getUrl(this.saveUrl_postfix);\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers,withCredentials:true});\n        return this.http.post(saveUrl, report, options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n\t  }\n\n      submit(request:any):Observable<Response> {\n\t\tvar submitUrl = this.getUrl(this.submitUrl_postfix);\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers,withCredentials:true});\n        return this.http.post(submitUrl, request, options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n\t  }\n\n      query(request_type:string, currPage: string,consult_state:string,request_date_start:string,request_date_end:string): Observable<Response> {\n\t\tvar searchUrl = this.getUrl(this.searchUrl_postfix);\n        let params: URLSearchParams = new URLSearchParams();\n\t\tparams.set('request_type', request_type);\n        params.set('currPage', currPage);\n        params.set('consult_state', consult_state);\n        params.set('request_date_start', request_date_start);\n        params.set('request_date_end', request_date_end);\n\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers,withCredentials:true,search: params});\n\n\t\treturn this.http.get(searchUrl, options)\n\t\t\t\t\t\t\t.map(this.extractData)\n\t\t\t\t\t\t\t.catch(this.handleError);\n\t  }\n\n\n      Report_query(auditing:string,report_no:string): Observable<Response> {\n\t\tvar reportUrl = this.getUrl(this.reportUrl_postfix);\n        let params: URLSearchParams = new URLSearchParams();\n        params.set('auditing', auditing);\n        params.set('report_no', report_no);\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers,withCredentials:true,search: params});\n        return this.http.get(reportUrl,options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n      }\n\n     login(id: string,password:string):Observable<Response> {\n\t\tvar loginUrl = this.getUrl(this.loginUrl_postfix);\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers,withCredentials:true});//cookie\n\n\n        return this.http.post(loginUrl,JSON.stringify({user_id:id,user_password:password}), options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n      }\n\n\t  logout():Observable<Response> {\n\t\tvar logoutUrl = this.getUrl(this.logoutUrl_postfix);\n\t\tlet headers = new Headers({ 'Content-Type': 'application/json' });\n\t\tlet options = new RequestOptions({ headers: headers,withCredentials:true});//cookie\n\t\treturn this.http.get(logoutUrl,options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n\n\t  }\n\n\t  private getUrl(postfix) {\n\t\tvar prefix = DOMAINRIS_SERVER_ADDRESS;\n\t\tif (localStorage.getItem(\"domainrisurl\") != null) {\n\t\t\tprefix = localStorage.getItem(\"domainrisurl\");\n\t\t}\n\t\tvar url = prefix + postfix;\n\t\treturn url;\n\t  }\n\n      private extractData(res: Response) {\n        let body = res.json();\n        return body || { };\n      }\n\n      private handleError (error: Response | any) {\n        // In a real world app, you might use a remote logging infrastructure\n        let errMsg: string;\n        if (error instanceof Response) {\n          const body = error.json() || '';\n          const err = body.error || JSON.stringify(body);\n          errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n        } else {\n          errMsg = error.message ? error.message : error.toString();\n        }\n        console.error(errMsg);\n        return Observable.throw(errMsg);\n      }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/login.service.ts","import {ImageOperatingType} from \"./common/ImageOperatingType\";\r\nimport {OperationScope} from \"./common/OperationScope\";\r\n/**\r\n * Created by binsirMac on 2016-12-29.\r\n */\r\nexport class Config{\r\n  // the VS information\r\n  static AXVS_ADDRESS : string;\r\n  static AXVS_USERID  : string;\r\n  static AXVS_PASSWORD : string;\r\n  static AXVS_ACCESS_TOKEN : string;\r\n\r\n\r\n  //for ImageViewer padding\r\n  static readonly  IMAGEVIEWER_PADDING_TOP : number = 56;\r\n  // default\r\n  static readonly  IMAGEBOXVIEW_UNSELECTED_COLOR : string = 'grey';\r\n  static readonly  IMAGEBOXVIEW_SELECTED_COLOR : string = '#F00';\r\n  static readonly  IMAGEBOXVIEW_BORDOR_WIDTH : number = 1;\r\n\r\n  static readonly  TILEVIEW_UNSELECTED_COLOR : string = 'grey';\r\n  static readonly  TILEBOXVIEW_SELECTED_COLOR : string = 'yellow';\r\n  static readonly  TILEVIEW_BORDOR_WIDTH : number = 1;\r\n\r\n  static readonly  TILEVIEW_LAYOUT_ROWS : number = 1;\r\n  static readonly  TILEVIEW_LAYOUT_COLUMNS : number = 1;\r\n\r\n  static imageOperatingType : ImageOperatingType = ImageOperatingType.ImageOperatingTypeWindowLevel;\r\n  static AxOperationScope  : OperationScope      = OperationScope.SeriesScope;\r\n\r\n  static readonly  ROI_STOKE_STYLE : string = 'green';\r\n  static readonly  ROI_LINE_WIDTH : number = 1;\r\n  static readonly  RULER_STROKE_STYLE : string = 'green';\r\n  static readonly  RULER_LINE_WIDTH : number = 1;\r\n\r\n  static readonly  RULER_WIDTH:number = 16;\r\n  static readonly  RULER_HEIGHT:number = 16;\r\n  static readonly  RULER_MARGIN_LEFT :number = 2;\r\n  static readonly  RULER_MARGIN_BOTTOM :number = 2;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/Config.ts","import { Component } from '@angular/core';\nimport { NavController,AlertController } from 'ionic-angular';\nimport { LoginService } from '../../service/login.service';\nimport { UserInfo } from './UserInfo';\n//import { Consultation_listPage } from '../Consultationlist/Consultationlist';\n//import { Collaborative_listPage } from \"../Collaborativelist/Collaborativelist\";\nimport { ListPage } from '../list/list';\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  errorMessage: string;\n  userinfo:UserInfo = new UserInfo();//\n  current_user:string;\n\n\n  constructor(public navCtrl: NavController,\n              public alertCtrl: AlertController,\n              private login_service:LoginService) { \n\t\t\t\tthis.checkLogin();\n\t\t\t  }\n\n\n    test(){\n          console.log(\":\"+this.userinfo.user_id+\":\"+this.userinfo.user_password);\n          //\n      }\n\t  \n  checkLogin() {\n\tif (localStorage.getItem('userid') != null) {\n\t\tthis.login(localStorage.getItem('userid'), localStorage.getItem('password'), true);\n\t}\n  }\n\n  login(id:string,password:string,auto:boolean){\n  if(id==\"\" || password==\"\"){        //\n      this.showInputErrorAlert();\n      return;\n    } else{\n      this.login_service.login(id,password)  //\n            .subscribe(\n            res  => {if(String(res.status)  ==\"Success\"){\n              this.current_user=res['account']['username'];\n              console.log(this.current_user);\n\t\t\t  localStorage.setItem('userid',id);\n\t\t\t  localStorage.setItem('password',password);\n\t\t\t  localStorage.setItem('userno', res['account']['userno']);\n\t\t\t  localStorage.setItem('displayname', res['account']['displayname']);\n\t\t\t  this.navCtrl.push(ListPage);\n\t\t\t} else {\n\t\t\t\tif (!auto) {\n\t\t\t\t\tthis.showInputErrorAlert();\n\t\t\t\t}\n            }},\n            error =>  this.errorMessage = <any>error);\n      }\n    this.test();\n  }\n\n\n  showInputErrorAlert(){\n    let alert = this.alertCtrl.create({\n          title: '',\n          subTitle: '!',\n          buttons: ['']\n        });\n        alert.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","//\n//\nlet _DOMAINRIS_SERVER_ADDRESS = '';\n// let _DOMAINRIS_SERVER_ADDRESS = 'http://192.168.4.184:8080';\nlet _AXVS_SERVER_ADDRESS = 'http://192.168.4.184:8080/axvs';\nlet _PatientXML:string = `<ReportInfo><PatientInfo><patient_hospital><patient_hospital_title></patient_hospital_title>\n<patient_hospital_value></patient_hospital_value>\n</patient_hospital>\n<patient_pid>\n<patient_pid_title>ID</patient_pid_title>\n<patient_pid_value></patient_pid_value>\n</patient_pid>\n<patient_name>\n<patient_name_title></patient_name_title>\n<patient_name_value></patient_name_value>\n</patient_name>\n<patient_sex>\n<patient_sex_title></patient_sex_title>\n<patient_sex_value></patient_sex_value>\n</patient_sex>\n<patient_birthday>\n<patient_birthday_title></patient_birthday_title>\n<patient_birthday_date></patient_birthday_date>\n</patient_birthday>\n<age>\n<age_title></age_title>\n<age_value></age_value>\n</age>\n</PatientInfo>\n<NumberInfo>\n<dept_no>\n  <dept_no_title></dept_no_title>\n<dept_no_value></dept_no_value>\n</dept_no>\n</NumberInfo>\n<PartInfo>\n<symptom>\n  <symptom_title></symptom_title>\n<symptom_value></symptom_value>\n</symptom>\n<diagnoses>\n<diagnoses_title></diagnoses_title>\n<diagnoses_value></diagnoses_value>\n</diagnoses>\n<check_part>\n<check_part_title></check_part_title>\n<check_part_value></check_part_value>\n</check_part>\n</PartInfo>\n<Content>\n<report_content>\n  <report_content_title></report_content_title>\n<report_content_value></report_content_value>\n</report_content>\n<report_conclusion>\n<report_conclusion_title></report_conclusion_title>\n<report_conclusion_value></report_conclusion_value>\n<report_comments_value></report_comments_value>\n</report_conclusion>\n<report_comments>\n<report_comments_title></report_comments_title>\n</report_comments>\n<report_result>\n<report_result_title></report_result_title>\n<report_result_value></report_result_value>\n</report_result>\n<film_quality>\n<film_quality_title></film_quality_title>\n<film_quality_value></film_quality_value>\n</film_quality>\n</Content>\n<Doctor_Date>\n<exam_doctor>\n  <exam_doctor_title></exam_doctor_title>\n<exam_doctor_value></exam_doctor_value>\n</exam_doctor>\n<report_doctor_no>\n<report_doctor_no_title></report_doctor_no_title>\n<report_doctor_no_value></report_doctor_no_value>\n</report_doctor_no>\n<report_doctor>\n<report_doctor_title></report_doctor_title>\n<report_doctor_value></report_doctor_value>\n</report_doctor>\n<report_date>\n<report_date_title></report_date_title>\n<report_date_value></report_date_value>\n</report_date>\n</Doctor_Date>\n<Other></Other>\n<report_uid></report_uid>\n</ReportInfo>`;\nexport const Patitentxml  = _PatientXML;\nexport const DOMAINRIS_SERVER_ADDRESS = _DOMAINRIS_SERVER_ADDRESS;\nexport const AXVS_SERVER_ADDRESS = _AXVS_SERVER_ADDRESS;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.constants.ts","export class UserInfo{\n  user_id:\"\";\n  user_password:\"\";\n}\n//\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/UserInfo.ts","import {LFService} from \"typescript-logging\";\r\nimport {ImageBoxView} from \"./viewer/ImageBoxView\";\r\nimport {StreamJSONStudyLoader} from \"./loader/StreamJSONStudyLoader\";\r\nimport {CGRect} from \"./common/CGRect\";\r\nimport {Config} from \"./Config\";\r\nimport {EventDispatcher, EventTypes} from \"./common/EventDispatcher\";\r\nimport {ImageOperatingType} from \"./common/ImageOperatingType\";\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\n\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"ImageViewer\");\r\n\r\nexport class ImageViewer {\r\n\r\n  selectedImageBoxView : ImageBoxView;\r\n  imageBoxRows  : number;\r\n  imageBoxColumns : number;\r\n\r\n  displayedStudy : any;\r\n\r\n  constructor(private imageViewerDivElement: HTMLElement,\r\n              public  studyUID: string,\r\n              public  studyStatus: string,\r\n              public  axvsAddress: string,\r\n              public  axvsUserId: string,\r\n              public  axvsPassword: string,) {\r\n    if(axvsAddress){\r\n      Config.AXVS_ADDRESS = axvsAddress.trim();\r\n    }else{\r\n      this.displayError();\r\n    }\r\n    Config.AXVS_USERID = axvsUserId;\r\n    Config.AXVS_PASSWORD = axvsPassword;\r\n\r\n    //define all the event listeners\r\n    EventDispatcher.getInstance().subscribe(EventTypes.SelectTileView, (selectedTileView, args) => {\r\n      this.selectedImageBoxView = selectedTileView.parentImageBoxView;\r\n    });\r\n  }\r\n\r\n  clear(){\r\n    EventDispatcher.getInstance().clear();\r\n  }\r\n\r\n  display() {\r\n    logger.info(\"To show the studyUID:\" + this.studyUID + \", from the VS:\" + this.axvsAddress);\r\n    //imageViewerDivElement.innerText = \"call the display image viewer\" + this.studyUID;\r\n\r\n    this.displayLoading();\r\n\r\n    if (this.studyUID) {\r\n      this.displayStudy();\r\n    }\r\n\r\n  }\r\n\r\n  removeAll() {\r\n    while (this.imageViewerDivElement.firstChild) {\r\n      this.imageViewerDivElement.removeChild(this.imageViewerDivElement.firstChild);\r\n    }\r\n  }\r\n\r\n  displayLoading() {\r\n    this.removeAll();\r\n\r\n    //set the default loading page;\r\n    let img = document.createElement('img');\r\n    img.setAttribute('src', 'assets/img/viewer/waiting.gif');\r\n    img.setAttribute('class', 'centeredImg');\r\n    this.imageViewerDivElement.appendChild(img);\r\n  }\r\n\r\n  displayError(){\r\n    this.removeAll();\r\n\r\n    //set the default loading page;\r\n    let img = document.createElement('img');\r\n    img.setAttribute('src', 'assets/img//viewer/error.png');\r\n    img.setAttribute('class', 'centeredImg');\r\n    this.imageViewerDivElement.appendChild(img);\r\n  }\r\n\r\n  displayStudy() {\r\n    let streamJSONStudyLoader = new StreamJSONStudyLoader(this.studyUID,this.studyStatus);\r\n\r\n    streamJSONStudyLoader.load().then((study : any) => {\r\n      logger.info(\"the display study:\"+study);\r\n      //1. reset the div to display the study.\r\n      this.removeAll();\r\n\r\n      //2. generate the layout\r\n      this.displayedStudy = study;\r\n      if (study.series.length == 1){\r\n        // set the image viewer layout.\r\n        this.setImageViewerLayout(1, 1, study);\r\n      }else if (study.series.length == 2){\r\n        this.setImageViewerLayout(2, 1, study);\r\n      }else{\r\n        // set the image viewer layout.\r\n        this.setImageViewerLayout(2, 2, study);\r\n      }\r\n    }, (error) => {\r\n      console.error(\"Failed!\", error);\r\n      this.displayError();\r\n    });\r\n  }\r\n\r\n  setImageViewerLayout(rows: number, columns: number, study : any) {\r\n    logger.info(\"set layout to rows:\" + rows + \", columns:\" + columns);\r\n    //first remove all the elements.\r\n    this.removeAll();\r\n\r\n    //second draw the designed grid\r\n    this.imageBoxRows = rows;\r\n    this.imageBoxColumns = columns;\r\n\r\n    let newSize = rows * columns;\r\n    let imageViewerRect = this.imageViewerDivElement.getBoundingClientRect();\r\n    let imageViewerRectWidth : number = imageViewerRect.width;\r\n    let imageViewerRectHeight : number = imageViewerRect.height - Config.IMAGEVIEWER_PADDING_TOP;\r\n\r\n    let imageViewerCGRect = new CGRect(0, 0 , imageViewerRectWidth , imageViewerRectHeight);\r\n\r\n    for (let i: number = 0; i < newSize; i++) {\r\n      let newImageBoxView = new ImageBoxView(imageViewerCGRect, rows, columns , i);\r\n\r\n      if(study && study.series[i]){\r\n        newImageBoxView.setCurrentDisplayedSeries(study, study.series[i]);\r\n      }\r\n\r\n      newImageBoxView.draw(this.imageViewerDivElement);\r\n\r\n      if( i == 0){\r\n        if(this.selectedImageBoxView){\r\n          this.selectedImageBoxView.selected = false;\r\n        }\r\n        newImageBoxView.selected = true;\r\n        newImageBoxView.selectedTileView.selected = true;\r\n        this.selectedImageBoxView = newImageBoxView;\r\n      }\r\n    }\r\n  }\r\n\r\n  reLayout(rows : number, columns : number){\r\n    logger.info(`relayout the image viewer, rows:${rows}, columns:${columns}`);\r\n    this.setImageViewerLayout(rows,columns, this.displayedStudy);\r\n  }\r\n\r\n  resize(){\r\n    let imageViewerRect = this.imageViewerDivElement.getBoundingClientRect();\r\n    let imageViewerRectWidth = imageViewerRect.width;\r\n    let imageViewerRectHeight = imageViewerRect.height - Config.IMAGEVIEWER_PADDING_TOP;\r\n    logger.info(`change the size:${imageViewerRectWidth}-${imageViewerRectHeight}`);\r\n    let imageViewerCGRect = new CGRect(0, 0 , imageViewerRectWidth , imageViewerRectHeight);\r\n    EventDispatcher.getInstance().dispatch(EventTypes.Resize, this, imageViewerCGRect);\r\n  }\r\n\r\n  reset(){\r\n    if(this.selectedImageBoxView){\r\n      if(this.selectedImageBoxView.selectedTileView){\r\n        this.selectedImageBoxView.selectedTileView.reset();\r\n      }\r\n      this.selectedImageBoxView.reset();\r\n    }\r\n  }\r\n\r\n  preset(windowCenter : number, windowWidth : number){\r\n    logger.info(`preset the image with windowCenter:${windowCenter}, windowWidth:${windowWidth}`);\r\n    if(this.selectedImageBoxView){\r\n      this.selectedImageBoxView.setWL(windowCenter,windowWidth);\r\n    }\r\n  }\r\n\r\n  rotate(degree:number){\r\n    if(this.selectedImageBoxView){\r\n      this.selectedImageBoxView.rotate(degree);\r\n    }\r\n  }\r\n\r\n  selectSeries2Show(study:any,series: any){\r\n    if(this.selectedImageBoxView){\r\n      this.selectedImageBoxView.setCurrentDisplayedSeries(study,series);\r\n    }\r\n  }\r\n\r\n  doZoom(){\r\n    Config.imageOperatingType = ImageOperatingType.ImageOperatingTypeZoom;\r\n    EventDispatcher.getInstance().dispatch(EventTypes.ChangeOperatingType, this, 'Get the change');\r\n  }\r\n  doROI(){\r\n    Config.imageOperatingType = ImageOperatingType.ImageOperatingTypeMeasure;\r\n    EventDispatcher.getInstance().dispatch(EventTypes.ChangeOperatingType, this, 'Get the change');\r\n  }\r\n  doWL(){\r\n    Config.imageOperatingType = ImageOperatingType.ImageOperatingTypeWindowLevel;\r\n    EventDispatcher.getInstance().dispatch(EventTypes.ChangeOperatingType, this, 'Get the change');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/ImageViewer.ts","/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class CGPoint {\r\n  x: number;\r\n  y: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/CGPoint.ts","import {TileView} from \"./TileView\";\r\nimport {DisplaySet} from \"../display/DisplaySet\";\r\n//import {Series} from \"../model/Series\";\r\nimport {CGRect} from \"../common/CGRect\";\r\nimport {PresentationImage} from \"../display/PresentationImage\";\r\nimport {LFService} from \"typescript-logging\";\r\nimport {EventDispatcher, EventTypes} from \"../common/EventDispatcher\";\r\nimport {Config} from \"../Config\";\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"ImageBoxView\");\r\n\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class ImageBoxView {\r\n  frame:CGRect;\r\n  bounds:CGRect;\r\n  // the image box viewer div html element\r\n  imageBoxRootDivElement: HTMLElement;\r\n  // public members\r\n  private _selected: boolean;\r\n  enabled: boolean = true;\r\n  displayedSeriesUID: string;\r\n  currentDisplayedSeries: any;\r\n  currentDisplayedStudy: any;\r\n  tileViews: TileView[] = [];\r\n  selectedTileView: TileView;\r\n  isPlaying: boolean;\r\n  normalizedRectangle: ClientRect;\r\n  private _topLeftPresentationImageIndex: number = -1;\r\n  private presentationImagesCount: number = 0;\r\n  displaySet: DisplaySet;\r\n\r\n  //private members\r\n  private tileRows: number;\r\n  private tileColumns: number;\r\n  private isCrossSectional: boolean;\r\n\r\n  private imageBoxViewWidth: number;\r\n  private imageBoxViewHeight: number;\r\n\r\n\r\n  constructor(private parentFrame: CGRect, private imageBoxRows: number, private imageBoxColumns: number, private tag: number) {\r\n    let newWidth = (parentFrame.width) / imageBoxColumns;\r\n    let newHeight = (parentFrame.height) / imageBoxRows;\r\n    let newX = newWidth * (tag % imageBoxColumns);\r\n    let newY = newHeight * (tag / imageBoxColumns);\r\n    this.frame = new CGRect(newX,newY,newWidth,newHeight);\r\n    this.bounds = new CGRect(0,0,newWidth,newHeight);\r\n\r\n    this.imageBoxViewWidth = newWidth;\r\n    this.imageBoxViewHeight = newHeight;\r\n\r\n    //create the div HTML Element;\r\n    this.imageBoxRootDivElement = document.createElement('div');\r\n    this.imageBoxRootDivElement.setAttribute(\"class\", \"imageBoxView\");\r\n    this.imageBoxRootDivElement.setAttribute(\"style\",\r\n      `border:${Config.IMAGEBOXVIEW_BORDOR_WIDTH}px solid ${Config.IMAGEBOXVIEW_UNSELECTED_COLOR};float: left; width:${newWidth}px;height:${newHeight}px;`);\r\n    this.imageBoxRootDivElement.setAttribute(\"tag\", \"\" + tag);\r\n    //create the tile views;\r\n    this.tileRows = Config.TILEVIEW_LAYOUT_ROWS;\r\n    this.tileColumns = Config.TILEVIEW_LAYOUT_COLUMNS;\r\n\r\n    let matrixSize: number = this.tileRows * this.tileColumns;\r\n\r\n    for (let i: number = 0; i < matrixSize; i++) {\r\n      let tileWidth: number = (newWidth - 2 * Config.IMAGEBOXVIEW_BORDOR_WIDTH) / this.tileColumns;\r\n      let tileHeight: number = (newHeight - 2 * Config.IMAGEBOXVIEW_BORDOR_WIDTH ) / this.tileRows;\r\n      let tileX: number = tileWidth * (i / this.tileColumns);\r\n      let tileY: number = tileHeight * (i % this.tileColumns);\r\n      let tileFrame = new CGRect(tileX, tileY, tileWidth, tileHeight);\r\n\r\n      let tileView = new TileView(this, tileFrame, this.tileRows, this.tileColumns, i);\r\n\r\n      this.tileViews.push(tileView);\r\n\r\n      tileView.draw(this.imageBoxRootDivElement);\r\n\r\n      if (i == 0) {\r\n        this.selectedTileView = tileView;\r\n      }\r\n    }\r\n\r\n    //define all the event listeners\r\n    EventDispatcher.getInstance().subscribe(EventTypes.SelectTileView, (selectedTileView, args) => {\r\n      if (selectedTileView.parentImageBoxView == this) {\r\n        this.selected = true;\r\n        if (this.selectedTileView != selectedTileView) {\r\n          this.selectedTileView = selectedTileView;\r\n        }\r\n      } else {\r\n        this.selected = false;\r\n      }\r\n\r\n    });\r\n    EventDispatcher.getInstance().subscribe(EventTypes.Resize, (imageViewer,imageViewerCGRect) => {\r\n      logger.info(`Resize the Imageboxviewer, width:${imageViewerCGRect.width} - ${imageViewerCGRect.height}`);\r\n      let newWidth = (imageViewerCGRect.width) / this.imageBoxColumns;\r\n      let newHeight = (imageViewerCGRect.height) / this.imageBoxRows;\r\n      let newX = newWidth * (this.tag % this.imageBoxColumns);\r\n      let newY = newHeight * (this.tag / this.imageBoxColumns);\r\n\r\n      this.imageBoxViewWidth = newWidth;\r\n      this.imageBoxViewHeight = newHeight;\r\n\r\n      if (this.selected) {\r\n        this.imageBoxRootDivElement.setAttribute(\"style\",\r\n          `border:${Config.IMAGEBOXVIEW_BORDOR_WIDTH}px solid ${Config.IMAGEBOXVIEW_SELECTED_COLOR};float: left; width:${this.imageBoxViewWidth}px;height:${this.imageBoxViewHeight}px;`);\r\n      } else {\r\n        this.imageBoxRootDivElement.setAttribute(\"style\",\r\n          `border:${Config.IMAGEBOXVIEW_BORDOR_WIDTH}px solid ${Config.IMAGEBOXVIEW_UNSELECTED_COLOR};float: left; width:${this.imageBoxViewWidth}px;height:${this.imageBoxViewHeight}px;`);\r\n      }\r\n\r\n      let i : number = 0;\r\n      for(let tileView of this.tileViews){\r\n        let tileWidth: number = (newWidth - 2 * Config.IMAGEBOXVIEW_BORDOR_WIDTH ) / this.tileColumns;\r\n        let tileHeight: number = (newHeight - 2 * Config.IMAGEBOXVIEW_BORDOR_WIDTH) / this.tileRows;\r\n        let tileX: number = tileWidth * (i / this.tileColumns);\r\n        let tileY: number = tileHeight * (i % this.tileColumns);\r\n        let tileFrame = new CGRect(tileX, tileY, tileWidth, tileHeight);\r\n        tileView.resize(tileFrame);\r\n        i ++;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  get selected(): boolean {\r\n    return this._selected;\r\n  }\r\n\r\n  set selected(value: boolean) {\r\n    this._selected = value;\r\n    if (value) {\r\n      this.imageBoxRootDivElement.setAttribute(\"style\",\r\n        `border:${Config.IMAGEBOXVIEW_BORDOR_WIDTH}px solid ${Config.IMAGEBOXVIEW_SELECTED_COLOR};float: left; width:${this.imageBoxViewWidth}px;height:${this.imageBoxViewHeight}px;`);\r\n    } else {\r\n      this.imageBoxRootDivElement.setAttribute(\"style\",\r\n        `border:${Config.IMAGEBOXVIEW_BORDOR_WIDTH}px solid ${Config.IMAGEBOXVIEW_UNSELECTED_COLOR};float: left; width:${this.imageBoxViewWidth}px;height:${this.imageBoxViewHeight}px;`);\r\n    }\r\n  }\r\n\r\n  draw(imageViewerDivElement: HTMLElement) {\r\n    imageViewerDivElement.appendChild(this.imageBoxRootDivElement);\r\n  }\r\n\r\n  removeAll() {\r\n    while (this.imageBoxRootDivElement.firstChild) {\r\n      this.imageBoxRootDivElement.removeChild(this.imageBoxRootDivElement.firstChild);\r\n    }\r\n  }\r\n\r\n  setCurrentDisplayedSeries(study: any, series: any) {\r\n    logger.info(\"to display series:\" + series);\r\n\r\n    // 0.remove current display set from the sereis.\r\n    // this.removeAll();\r\n\r\n    // 1.set the shown series instance uid\r\n    this.currentDisplayedSeries = series;\r\n    this.currentDisplayedStudy = study;\r\n\r\n    // 2.generate the displayset from the series\r\n    let displaySet = DisplaySet.generateFromSeries(study, series);\r\n\r\n    // 3.set the shown displayset\r\n    this.setDisplaySet(displaySet);\r\n\r\n    // 4.post the selected tile view change event\r\n    if (this.selected) {\r\n      // NSNotificationCenter *notificationCenter=[NSNotificationCenter defaultCenter];\r\n      //\r\n      // [notificationCenter postNotificationName:AxChangeSeriesNotification\r\n      // object:self.selectedTileView];\r\n    }\r\n  }\r\n\r\n  setDisplaySet(displaySet: DisplaySet) {\r\n    this.displaySet = displaySet;\r\n\r\n    this.presentationImagesCount = displaySet.presentationImages.length;\r\n\r\n    if (this.presentationImagesCount > 0) {\r\n      let presentationImage = displaySet.presentationImages[0];\r\n      this.displayedSeriesUID = presentationImage.frameReference.parentImageSop.seriesInstanceUid;\r\n    }\r\n\r\n    if (this.presentationImagesCount > 0) {\r\n      this.topLeftPresentationImageIndex = 0;\r\n\r\n      if (this.presentationImagesCount > 1) {\r\n        this.isCrossSectional = true;\r\n      } else {\r\n        this.isCrossSectional = false;\r\n      }\r\n\r\n      this.adjustShowImages();\r\n    }\r\n  }\r\n\r\n  adjustShowImages() {\r\n    let index: number = 0;\r\n\r\n    for (let tileView of this.tileViews) {\r\n      let nexTopLeftPresentationImageIndex = this.topLeftPresentationImageIndex + index;\r\n      if (nexTopLeftPresentationImageIndex < this.presentationImagesCount) {\r\n        tileView.setPresentationImage(this.displaySet.presentationImages[nexTopLeftPresentationImageIndex]);\r\n      } else {\r\n        tileView.setPresentationImage(null);\r\n      }\r\n      index++;\r\n    }\r\n  }\r\n\r\n  increaseTopLeftPresentationImageIndex(){\r\n    if(this.topLeftPresentationImageIndex == this.displaySet.presentationImages.length - 1){\r\n      return;\r\n    }\r\n    this.topLeftPresentationImageIndex ++;\r\n  }\r\n  decreaseTopLeftPresentationImageIndex(){\r\n    if (this.topLeftPresentationImageIndex == 0){\r\n      return;\r\n    }\r\n    this.topLeftPresentationImageIndex --;\r\n  }\r\n\r\n  get topLeftPresentationImageIndex():number{\r\n    return this._topLeftPresentationImageIndex;\r\n  }\r\n  set topLeftPresentationImageIndex(value : number){\r\n    if (this._topLeftPresentationImageIndex == value) {\r\n      return;\r\n    }\r\n    if (value >= 0 || value < this.presentationImagesCount) {\r\n      this._topLeftPresentationImageIndex = value;\r\n      let sliderPosition :number = value / (this.tileColumns * this.tileRows);\r\n      // imageScrollBar.value = sliderPosition;\r\n      // //        [imageScrollBar setIndex:topLeftPresentationImageIndex andTotal:self.presentationImagesCount];\r\n      //\r\n      this.adjustShowImages();\r\n      // [imageScrollBar setScrollImageIndex:self.selectedTileView.presentationImage];\r\n    }\r\n  }\r\n\r\n  reset(){\r\n    if(this.selectedTileView){\r\n      this.selectedTileView.reset();\r\n    }\r\n  }\r\n\r\n  setWL(windowCenter : number, windowWidth : number){\r\n    if(this.selectedTileView){\r\n      this.selectedTileView.setWL(windowCenter, windowWidth);\r\n    }\r\n  }\r\n\r\n  rotate(degree:number){\r\n    if(this.selectedTileView){\r\n      this.selectedTileView.rotate(degree);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/viewer/ImageBoxView.ts","import {DisplaySet} from '../display/DisplaySet';\r\nimport {PresentationImage} from '../display/PresentationImage';\r\nimport {CGRect} from \"../common/CGRect\";\r\nimport {LFService} from \"typescript-logging\";\r\nimport {ImageBoxView} from \"./ImageBoxView\";\r\nimport {EventDispatcher, EventTypes} from \"../common/EventDispatcher\";\r\nimport {Config} from \"../Config\";\r\nimport {CGSize} from \"../common/CGSize\";\r\nimport {ImageOperatingType} from \"../common/ImageOperatingType\";\r\nimport {UIImageOrientation} from \"../common/UIImageOrientation\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {RoiUtil} from \"../roi/RoiUtil\";\r\nimport {AngleRoiTool} from \"../roi/AngleRoiTool\";\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"TileView\");\r\n\r\nexport class TileView {\r\n  // the image box viewer div html element\r\n  private tileRootDivElement: HTMLElement;\r\n\r\n  currentImageIndex: number;\r\n  normalizedRectangle: ClientRect;\r\n  currentImageOperatingType:ImageOperatingType;\r\n\r\n  private needDrawImage:boolean;\r\n  private _presentationImage: PresentationImage;\r\n  private _selected: boolean = false;\r\n  private loadingImg: HTMLElement;\r\n  private errorImg : HTMLElement;\r\n  private canv : HTMLCanvasElement;\r\n  private ctx : any;\r\n  private allCleared:boolean;\r\n\r\n  private topLeftDivElement:HTMLDivElement;\r\n  private topLeftDivBackgroundElement:HTMLDivElement;\r\n  private topRightDivElement :HTMLDivElement;\r\n  private topRightDivBackgroundElement:HTMLDivElement;\r\n  private bottomLeftDivElement :HTMLDivElement;\r\n  private bottomLeftDivBackgroundElement:HTMLDivElement;\r\n  private bottomRightDivElement:HTMLDivElement;\r\n  private bottomRightBackgroundDivElement :HTMLDivElement;\r\n  private patientNameOverlayElement :HTMLDivElement;\r\n  private patientNameOverlayBackgroundElement :HTMLDivElement;\r\n  private patientIdOverlayElement :HTMLDivElement;\r\n  private patientIdOverlayBackgroundElement :HTMLDivElement;\r\n  private instanceNumberOverlayElement :HTMLDivElement;\r\n  private instanceNumberOverlayBackgroundElement :HTMLDivElement;\r\n  private wlOverlayElement :HTMLDivElement;\r\n  private wlOverlayBackgroundElement :HTMLDivElement;\r\n  private zoomOverlayElement :HTMLDivElement;\r\n  private zoomOverlayBackgroundElement :HTMLDivElement;\r\n\r\n  private hammerManager : HammerManager;\r\n  private singleTapThumbnail:TapRecognizer;\r\n  private panRecognizer:PanRecognizer;\r\n  private adjustWLGesture:PanRecognizer;\r\n  private swipeLeftGesture:SwipeRecognizer;\r\n  private swipeRightGesture:SwipeRecognizer;\r\n  private pinchRecognizer:PinchRecognizer;\r\n\r\n  constructor(public parentImageBoxView: ImageBoxView, public frame: CGRect, private tileRows: number, private tileColumns: number, private tag: number) {\r\n    //create the div HTML Element;\r\n    this.tileRootDivElement = document.createElement('div');\r\n    this.tileRootDivElement.setAttribute('class', 'tileView');\r\n    this.loadingImg = document.createElement('img');\r\n    this.loadingImg.setAttribute('src', 'assets/img/viewer/waiting.gif');\r\n    this.loadingImg.setAttribute('class', 'centeredImg');\r\n    //set the default loading page;\r\n    this.errorImg = document.createElement('img');\r\n    this.errorImg.setAttribute('src', 'assets/img//viewer/error.png');\r\n    this.errorImg.setAttribute('class', 'centeredImg');\r\n    this.tileRootDivElement.setAttribute(\"style\",\r\n      `float: left;border:${Config.TILEVIEW_BORDOR_WIDTH}px solid ${Config.TILEVIEW_UNSELECTED_COLOR};position: relative; width:${frame.width}px;height:${frame.height}px`);\r\n    this.tileRootDivElement.setAttribute(\"tag\", \"\" + tag);\r\n\r\n    //add the overlays\r\n    //topleft\r\n    this.topLeftDivElement = document.createElement('div');\r\n    this.topLeftDivElement.setAttribute('class','topLeftOverlayDiv');\r\n    this.patientNameOverlayElement = document.createElement('div');\r\n    this.topLeftDivElement.appendChild(this.patientNameOverlayElement);\r\n    this.topLeftDivBackgroundElement = document.createElement('div');\r\n    this.topLeftDivBackgroundElement.setAttribute('class','topLeftOverlayBackgroundDiv');\r\n    this.patientNameOverlayBackgroundElement = document.createElement('div');\r\n    this.topLeftDivBackgroundElement.appendChild(this.patientNameOverlayBackgroundElement);\r\n    //toperight\r\n    this.topRightDivElement = document.createElement('div');\r\n    this.topRightDivElement.setAttribute('class','topRightOverlayDiv');\r\n    this.patientIdOverlayElement = document.createElement('div');\r\n    this.topRightDivElement.appendChild(this.patientIdOverlayElement);\r\n    this.topRightDivBackgroundElement = document.createElement('div');\r\n    this.topRightDivBackgroundElement.setAttribute('class','topRightOverlayBackgroundDiv');\r\n    this.patientIdOverlayBackgroundElement = document.createElement('div');\r\n    this.topRightDivBackgroundElement.appendChild(this.patientIdOverlayBackgroundElement);\r\n    //bottomleft\r\n    this.bottomLeftDivElement = document.createElement('div');\r\n    this.bottomLeftDivElement.setAttribute('class','bottomLeftOverlayDiv');\r\n    this.instanceNumberOverlayElement = document.createElement('div');\r\n    this.bottomLeftDivElement.appendChild(this.instanceNumberOverlayElement);\r\n    this.bottomLeftDivBackgroundElement = document.createElement('div');\r\n    this.bottomLeftDivBackgroundElement.setAttribute('class','bottomLeftOverlayBackgroundDiv');\r\n    this.instanceNumberOverlayBackgroundElement = document.createElement('div');\r\n    this.bottomLeftDivBackgroundElement.appendChild(this.instanceNumberOverlayBackgroundElement);\r\n    //bottomright\r\n    this.bottomRightDivElement = document.createElement('div');\r\n    this.bottomRightDivElement.setAttribute('class','bottomRightOverlayDiv');\r\n    this.zoomOverlayElement = document.createElement('div');\r\n    this.bottomRightDivElement.appendChild(this.zoomOverlayElement);\r\n    this.wlOverlayElement = document.createElement('div');\r\n    this.bottomRightDivElement.appendChild(this.wlOverlayElement);\r\n    this.bottomRightBackgroundDivElement = document.createElement('div');\r\n    this.bottomRightBackgroundDivElement.setAttribute('class','bottomRightOverlayBackgroundDiv');\r\n    this.zoomOverlayBackgroundElement = document.createElement('div');\r\n    this.bottomRightBackgroundDivElement.appendChild(this.zoomOverlayBackgroundElement);\r\n    this.wlOverlayBackgroundElement = document.createElement('div');\r\n    this.bottomRightBackgroundDivElement.appendChild(this.wlOverlayBackgroundElement);\r\n\r\n    //initial the canvas for draw the image\r\n    this.canv = < HTMLCanvasElement > document.createElement(\"canvas\");\r\n    this.canv.width =  frame.width - 2 * Config.TILEVIEW_BORDOR_WIDTH;\r\n    this.canv.height =  frame.height - 2 * Config.TILEVIEW_BORDOR_WIDTH;\r\n    this.canv.setAttribute(\"style\", `width:${this.canv.width}px;height:${this.canv.height}px`);\r\n    this.ctx = this.canv.getContext(\"2d\");\r\n\r\n    //add all elements to tile view\r\n    //this.addAll();\r\n\r\n    //add the events listener\r\n    EventDispatcher.getInstance().subscribe(EventTypes.SelectTileView, (selectedTileView, args) => {\r\n      logger.info('Get the tap from tileview!');\r\n\r\n      if(this != selectedTileView){\r\n        this.selected =false;\r\n      }\r\n    });\r\n\r\n    //add the events listener\r\n    EventDispatcher.getInstance().subscribe(EventTypes.ChangeOperatingType, (args) => {\r\n      logger.info('Get the change operating type !');\r\n      // this.updateGestureRecognizer();\r\n      this.currentImageOperatingType = Config.imageOperatingType;\r\n      if(RoiUtil.getCurrentRoiTool()){\r\n        RoiUtil.getCurrentRoiTool().removeAllPoint();\r\n      }\r\n    });\r\n\r\n    //add the events listener\r\n    EventDispatcher.getInstance().subscribe(EventTypes.NeedsDisplayNotification, (sender,args) => {\r\n      logger.info('need to display!');\r\n      if (this.presentationImage == sender) {\r\n        //update the display parameters according the new presentationimage\r\n        this.presentationImage.updateDisplayParams(this.frame.size);\r\n        //\r\n        this.setNeedsDisplay();\r\n      }\r\n    });\r\n\r\n    this.currentImageOperatingType = ImageOperatingType.ImageOperatingTypeWindowLevel;\r\n\r\n    //add the gestures\r\n    // create a manager for that element\r\n    this.hammerManager = new Hammer.Manager(this.tileRootDivElement);\r\n    // create recognizers\r\n    this.singleTapThumbnail = new Hammer.Tap({\r\n      taps: 1\r\n    });\r\n    this.panRecognizer = new Hammer.Pan({ threshold: 0, pointers: 0 });\r\n    this.adjustWLGesture = new Hammer.Pan({ threshold: 5 });\r\n    // create recognizers\r\n    this.swipeLeftGesture = new Hammer.Swipe({ pointers: 2 });\r\n    this.swipeRightGesture = new Hammer.Swipe({ pointers: 2 });\r\n    this.pinchRecognizer = new Hammer.Pinch({threshold : 0.01});\r\n\r\n    this.hammerManager.add(this.singleTapThumbnail);\r\n    this.hammerManager.add(this.panRecognizer);\r\n\r\n    this.panRecognizer.recognizeWith(this.swipeLeftGesture);\r\n    this.pinchRecognizer.recognizeWith(this.swipeRightGesture);\r\n    this.pinchRecognizer.recognizeWith(this.pinchRecognizer);\r\n\r\n    // subscribe to events\r\n    this.hammerManager.on('tap', (e) => {\r\n      // do the tap\r\n      this.selected = true;\r\n      EventDispatcher.getInstance().dispatch(EventTypes.SelectTileView, this, 'Get the tap');\r\n    });\r\n\r\n    var deltaX = 0;\r\n    var deltaY = 0;\r\n\r\n\r\n    this.hammerManager.on('panstart', (e) => {\r\n      e.preventDefault();\r\n      if(!this.selected){\r\n        EventDispatcher.getInstance().dispatch(EventTypes.SelectTileView, this, 'Get the tap');\r\n      }\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        logger.info('begin to draw the roi');\r\n        RoiUtil.getCurrentRoiTool().touchesBegan(this.getCanvasPos(e.pointers[0]),this);\r\n      }\r\n    });\r\n\r\n    this.hammerManager.on('pancancel', (e) => {\r\n      e.preventDefault();\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        logger.info('cancel to draw the roi');\r\n        RoiUtil.getCurrentRoiTool().touchesCancelled(this.getCanvasPos(e.pointers[0]),this);\r\n      }\r\n    });\r\n\r\n    this.hammerManager.on('panmove', (e) => {\r\n      e.preventDefault();\r\n      var dX = deltaX + (e.deltaX);\r\n      var dY = deltaY + (e.deltaY);\r\n      if(dX==0 && dY ==0){\r\n        return;\r\n      }\r\n      if(this.presentationImage){\r\n        switch (this.currentImageOperatingType)\r\n        {\r\n          case ImageOperatingType.ImageOperatingTypeWindowLevel:\r\n            logger.info(`change the window level with width:${dX},center:${dY}`);\r\n            this.presentationImage.changeWindowLevel(dX,dY);\r\n            break;\r\n          case ImageOperatingType.ImageOperatingTypeZoom:\r\n            logger.info(`zoom image with width:${dX},center:${dY}`);\r\n            // self.presentationImage resizeImageWithScale:newScale atPoint:location andTileCenter:tileCenter\r\n            break;\r\n          case ImageOperatingType.ImageOperatingTypeMeasure:\r\n            RoiUtil.getCurrentRoiTool().touchesMoved(this.getCanvasPos(e.pointers[0]),this);\r\n            break;\r\n        }\r\n        this.displayImage();\r\n      }\r\n    });\r\n    this.hammerManager.on('panend', (e) => {\r\n      e.preventDefault();\r\n      deltaX = deltaX + e.deltaX;\r\n      deltaY = deltaY + e.deltaY;\r\n\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        logger.info('end to draw the roi');\r\n        RoiUtil.getCurrentRoiTool().touchesEnded(this.getCanvasPos(e.pointers[0]),this);\r\n      }\r\n    });\r\n\r\n    /*\r\n    this.canv.onmousedown = (e) => {\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        RoiUtil.getCurrentRoiTool().touchesBegan(this.getCanvasPos(e),this);\r\n        this.displayImage();\r\n      }\r\n    };\r\n\r\n    this.canv.onmousemove = (e) => {\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        RoiUtil.getCurrentRoiTool().touchesMoved(this.getCanvasPos(e),this);\r\n        this.displayImage();\r\n      }\r\n    };\r\n\r\n    this.canv.onmouseup = (e) => {\r\n      if(this.presentationImage && (this.currentImageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure)) {\r\n        RoiUtil.getCurrentRoiTool().touchesEnded(this.getCanvasPos(e),this);\r\n        this.displayImage();\r\n      }\r\n    };*/\r\n\r\n    this.hammerManager.on('swipeleft', e => {\r\n      logger.info('get the swip left event');\r\n      if(!this.selected){\r\n        EventDispatcher.getInstance().dispatch(EventTypes.SelectTileView, this, 'Get the tap');\r\n      }\r\n      if(this.parentImageBoxView){\r\n        this.parentImageBoxView.increaseTopLeftPresentationImageIndex();\r\n      }\r\n    });\r\n\r\n    this.hammerManager.on('swiperight', e => {\r\n      logger.info('get the swip right event');\r\n      if(!this.selected){\r\n        EventDispatcher.getInstance().dispatch(EventTypes.SelectTileView, this, 'Get the tap');\r\n      }\r\n      if(this.parentImageBoxView){\r\n        this.parentImageBoxView.decreaseTopLeftPresentationImageIndex();\r\n      }\r\n    });\r\n\r\n    // let initScale :number ;\r\n    // hammerManager.on('pinchstart', e => {\r\n    //   if(this.presentationImage){\r\n    //     initScale = this.presentationImage.aspectScale;\r\n    //   }else{\r\n    //     initScale = 1;\r\n    //   }\r\n    //   logger.info('get the pinch event to initial the scale get fom the image. with scale:'+initScale);\r\n    // });\r\n\r\n    this.hammerManager.on('pinch', e => {\r\n      if(!this.selected){\r\n        EventDispatcher.getInstance().dispatch(EventTypes.SelectTileView, this, 'Get the tap');\r\n      }\r\n      let centerPoint : HammerPoint = e.center;\r\n      if(this.presentationImage){\r\n        if(e.scale * this.presentationImage.width * this.presentationImage.aspectScale > 20){\r\n          this.presentationImage.lenCenterAtImage.x = centerPoint.x;\r\n          this.presentationImage.lenCenterAtImage.y = centerPoint.y;\r\n          logger.info('get the pinch event, with scale:'+e.scale * this.presentationImage.aspectScale);\r\n          this.presentationImage.aspectScale = this.presentationImage.aspectScale * e.scale;\r\n\r\n          this.displayImage();\r\n        }\r\n      }\r\n    });\r\n\r\n    // this.updateGestureRecognizer();\r\n    // hammerManager.on('pinchend', e => {\r\n    //   let centerPoint : HammerPoint = e.center;\r\n    //   this.presentationImage.lenCenterAtImage.x = centerPoint.x;\r\n    //   this.presentationImage.lenCenterAtImage.y = centerPoint.y;\r\n    //   initScale = initScale * e.scale;\r\n    //   logger.info('get the pinch event, with scale:'+initScale);\r\n    //   // reset the final scale\r\n    // });\r\n  }\r\n  resizeWithOldSuperviewSize(oldBoundsSize:CGSize,rotated:boolean,cleared:boolean){\r\n    this.allCleared = cleared;\r\n\r\n    if (this.tileRows==0||this.tileColumns==0) {\r\n      return;\r\n    }\r\n\r\n    if (cleared) {\r\n      // this.setNeedsDisplay();\r\n      return;\r\n    }\r\n\r\n    let centerPoint:CGPoint = this.center;\r\n    centerPoint = new CGPoint(centerPoint.x - this.frame.origin.x, centerPoint.y - this.frame.origin.y);\r\n\r\n    let superFrame:CGRect = this.parentImageBoxView.bounds;\r\n    let newWidth:number = superFrame.size.width / this.tileColumns;\r\n    let newHeight:number = superFrame.size.height / this.tileRows;\r\n    let newX:number = newWidth * (this.tag % this.tileColumns);\r\n    let newY:number = newHeight * (this.tag / this.tileColumns);\r\n    let newFrame:CGRect = new CGRect(newX, newY, newWidth, newHeight);\r\n    this.frame = newFrame;\r\n\r\n    this.presentationImage.setTileViewSize(newFrame.size,rotated,centerPoint);\r\n\r\n    this.setNeedsDisplay();\r\n  }\r\n\r\n  setRows(rows:number,columns:number){\r\n\r\n    if( this.tileRows == 1 && this.tileColumns == 1 && rows == 1 && columns == 1)\r\n    {\r\n      return;\r\n    }\r\n    this.tileRows = rows;\r\n    this.tileColumns = columns;\r\n\r\n    let rect:CGRect = this.parentImageBoxView.bounds;\r\n    this.resizeWithOldSuperviewSize(rect.size,false,false);\r\n  }\r\n\r\n  get selected(): boolean {\r\n    return this._selected;\r\n  }\r\n\r\n  set selected(value: boolean) {\r\n    this._selected = value;\r\n    if (value) {\r\n      this.tileRootDivElement.setAttribute(\"style\",\r\n        `float: left;border:${Config.TILEVIEW_BORDOR_WIDTH}px solid ${Config.TILEBOXVIEW_SELECTED_COLOR};position: relative; width:${this.frame.width}px;height:${this.frame.height}px`);\r\n    } else {\r\n      this.tileRootDivElement.setAttribute(\"style\",\r\n        `float: left;border:${Config.TILEVIEW_BORDOR_WIDTH}px solid ${Config.TILEVIEW_UNSELECTED_COLOR};position: relative; width:${this.frame.width}px;height:${this.frame.height}px`);\r\n    }\r\n  }\r\n\r\n  get presentationImage():PresentationImage{\r\n    return this._presentationImage;\r\n  }\r\n  set presentationImage(presentationImage:PresentationImage) {\r\n    if(this._presentationImage == null && presentationImage == null){\r\n\r\n      this.setNeedsDisplay();\r\n      return;\r\n    }\r\n    if(this._presentationImage!=presentationImage){\r\n      if(this._presentationImage){\r\n        this._presentationImage.parentTileView = null;\r\n      }\r\n\r\n      this._presentationImage = presentationImage;\r\n\r\n      this._presentationImage.parentTileView = this;\r\n\r\n      //        currentShownImageRef = nil;\r\n      this.needDrawImage = true;\r\n\r\n      if (!presentationImage) {\r\n        this.setNeedsDisplay();\r\n        return;\r\n      }\r\n\r\n      let imageBoxView:ImageBoxView = this.parentImageBoxView;\r\n      // [self addGestureRecognizerByOperatingType:imageBoxView.currentImageOperatingType];\r\n\r\n      //coment the following tow lines\r\n      // [presentationImage dicomImage];\r\n      this.setNeedsDisplay();\r\n\r\n      // if (!presentationImage.frameReference.parentImageSop.dataSource.isLoaded) {\r\n      //\r\n      //   return;\r\n      // }\r\n\r\n      this.presentationImage.setTileViewSize(this.frame.size,false,this.center);\r\n\r\n\r\n      AngleRoiTool.shareAngleRoiTool().clearRoiTool();\r\n\r\n      this.setNeedsDisplay();\r\n\r\n      if (this.selected) {\r\n\r\n        EventDispatcher.getInstance().dispatch(EventTypes.OverlayChangeNotification, this, null);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n  setNeedsDisplay(){\r\n    //update the overlays\r\n    this.updateOverlays();\r\n\r\n    //draw the image\r\n    this.displayImage();\r\n  }\r\n\r\n  reset(){\r\n    if(this.presentationImage){\r\n      this.presentationImage.reset();\r\n\r\n      this.displayImage();\r\n    }\r\n  }\r\n  getCanvasPos(e):CGPoint{\r\n    var rect = this.canv.getBoundingClientRect();\r\n    return new CGPoint(e.clientX - rect.left * (this.canv.width / rect.width), e.clientY - rect.top * (this.canv.height / rect.height));\r\n  };\r\n\r\n  get size():CGSize{\r\n    return new CGSize(this.canv.width , this.canv.height);//this.canv.bounds.size;\r\n  }\r\n\r\n\r\n\r\naddGestureRecognizerByOperatingType(imageOperatingType:ImageOperatingType){\r\n    // add the recognizers\r\n    if(this.presentationImage == null){\r\n      return;\r\n    }\r\n\r\n    switch (imageOperatingType)\r\n    {\r\n      case ImageOperatingType.ImageOperatingTypeWindowLevel:\r\n      case ImageOperatingType.ImageOperatingTypeZoom:\r\n        this.addStandardGestureOrgnization();\r\n        break;\r\n      case ImageOperatingType.ImageOperatingTypeMeasure:\r\n        this.addMeasureGestureOrgnization();\r\n        break;\r\n    }\r\n\r\n    this.currentImageOperatingType = imageOperatingType;\r\n  }\r\n\r\n  private addSingleTapGestureOrgnization(){\r\n    this.hammerManager.add(this.singleTapThumbnail);\r\n  }\r\n\r\n  private addStandardGestureOrgnization(){\r\n    this.removeMeasureGestureOrgnization();\r\n    this.addSingleTapGestureOrgnization();\r\n\r\n    this.hammerManager.add(this.pinchRecognizer);\r\n    this.hammerManager.add(this.panRecognizer);\r\n    this.hammerManager.add(this.adjustWLGesture);\r\n  }\r\n\r\n  private removeStandardGestureOrgnization(){\r\n    this.hammerManager.remove(this.pinchRecognizer);\r\n    this.hammerManager.remove(this.panRecognizer);\r\n    this.hammerManager.remove(this.adjustWLGesture);\r\n  }\r\n\r\n  private addMeasureGestureOrgnization(){\r\n    this.hammerManager.remove(this.singleTapThumbnail);\r\n    this.removeStandardGestureOrgnization();\r\n  }\r\n\r\n  private removeMeasureGestureOrgnization(){\r\n\r\n  }\r\n\r\n  scaleImage(pinchRecognizer:PinchRecognizer){\r\n    let parentImageBox:ImageBoxView = this.parentImageBoxView;\r\n    if(!(this.selected &&parentImageBox.selected)){\r\n      // this.handleTapImageBoxView(null);\r\n    }\r\n  }\r\n  draw(imageBoxRootDivElement: HTMLElement) {\r\n    imageBoxRootDivElement.appendChild(this.tileRootDivElement);\r\n  }\r\n\r\n  setPresentationImage(presentationImage: PresentationImage) {\r\n    //remove the display elements from div\r\n    if(presentationImage == null){\r\n      this.removeAll();\r\n      if(this.presentationImage){\r\n        this.presentationImage.parentTileView = null;\r\n      }\r\n      return;\r\n    }\r\n    if(this.presentationImage == presentationImage){\r\n      return;\r\n    }\r\n    if(this.presentationImage){\r\n      this.presentationImage.parentTileView = null;\r\n    }\r\n    this.presentationImage = presentationImage;\r\n    this.presentationImage.parentTileView = this;\r\n\r\n    if(!this.tileRootDivElement.contains(this.canv)){\r\n      this.addAll();\r\n    }\r\n    this._presentationImage.setTileViewSize(this.frame.size,false,this.center);\r\n\r\n    logger.info(\"To display image:\" + presentationImage);\r\n    this.setNeedsDisplay();\r\n\r\n  }\r\n\r\n  updateOverlays(){\r\n    this.patientNameOverlayElement.innerText = this.presentationImage.patientName;\r\n    this.patientNameOverlayBackgroundElement.innerText = this.patientNameOverlayElement.innerText;\r\n    this.patientIdOverlayElement.innerText = this.presentationImage.patientId;\r\n    this.patientIdOverlayBackgroundElement.innerText = this.patientIdOverlayElement.innerText;\r\n    this.instanceNumberOverlayElement.innerText = `Image:#${this.presentationImage.instanceNumber}/${this.presentationImage.parentDisplaySet.presentationImages.length}`;\r\n    this.instanceNumberOverlayBackgroundElement.innerText = this.instanceNumberOverlayElement.innerText;\r\n    this.wlOverlayElement.innerText = 'W:'+this.presentationImage.windowWidth+'/L:'+this.presentationImage.windowCenter;\r\n    this.wlOverlayBackgroundElement.innerText = this.wlOverlayElement.innerText;\r\n    this.zoomOverlayElement.innerText = 'Zoom:'+ this.presentationImage.aspectScale.toFixed(2);\r\n    this.zoomOverlayBackgroundElement.innerText = this.zoomOverlayElement.innerText;\r\n  }\r\n\r\n\r\n  removeAll() {\r\n    while (this.tileRootDivElement.firstChild) {\r\n      this.tileRootDivElement.removeChild(this.tileRootDivElement.firstChild);\r\n    }\r\n  }\r\n  addAll(){\r\n    this.tileRootDivElement.appendChild(this.loadingImg);\r\n    this.tileRootDivElement.appendChild(this.topLeftDivElement);\r\n    this.tileRootDivElement.appendChild(this.topLeftDivBackgroundElement);\r\n    this.tileRootDivElement.appendChild(this.topRightDivElement);\r\n    this.tileRootDivElement.appendChild(this.topRightDivBackgroundElement);\r\n    this.tileRootDivElement.appendChild(this.bottomLeftDivElement);\r\n    this.tileRootDivElement.appendChild(this.bottomLeftDivBackgroundElement);\r\n    this.tileRootDivElement.appendChild(this.bottomRightDivElement);\r\n    this.tileRootDivElement.appendChild(this.bottomRightBackgroundDivElement);\r\n    this.tileRootDivElement.appendChild(this.canv);\r\n  }\r\n\r\n  displayImage(){\r\n    logger.info('To display the image');\r\n    this.ctx.save();\r\n\r\n    //display the presentation image\r\n    if(this.presentationImage){\r\n      if(Config.imageOperatingType != ImageOperatingType.ImageOperatingTypeMeasure){\r\n        this.ctx.clearRect(0, 0, this.canv.width, this.canv.height);\r\n\r\n        if(!this.tileRootDivElement.contains(this.loadingImg)){\r\n          this.tileRootDivElement.appendChild(this.loadingImg);\r\n        }\r\n      }\r\n      this.presentationImage.drawInRect(this.frame,this.ctx);\r\n\r\n      //display the ROIs\r\n      if (RoiUtil.getCurrentRoiTool() && RoiUtil.getCurrentRoiTool().isDrawing() && this.selected) {\r\n         RoiUtil.getCurrentRoiTool().drawTemporaryIn(this,this.ctx);\r\n      }\r\n    }\r\n\r\n    this.ctx.restore();\r\n  }\r\n\r\n  computeHorizontalRulerUnit(): number {\r\n    let result = -1;\r\n    if (this.presentationImage.pixelSpacingX != 0 && this.presentationImage.pixelSpacingY != 0) {\r\n      result = this.presentationImage.originalSize.width * this.presentationImage.pixelSpacingX / 2.0;\r\n    } else if (this.presentationImage.imagerPixelSpacingX != 0 && this.presentationImage.imagerPixelSpacingY != 0) {\r\n      result = this.presentationImage.originalSize.width * this.presentationImage.imagerPixelSpacingX / 2.0;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  computeVerticalRulerUnit(): number {\r\n    let result = -1;\r\n    if (this.presentationImage.pixelSpacingX != 0 && this.presentationImage.pixelSpacingY != 0) {\r\n      result = this.presentationImage.originalSize.height * this.presentationImage.pixelSpacingY / 2.0;\r\n    } else if (this.presentationImage.imagerPixelSpacingX != 0 && this.presentationImage.imagerPixelSpacingY != 0) {\r\n      result = this.presentationImage.originalSize.height * this.presentationImage.imagerPixelSpacingY / 2.0;\r\n    }\r\n    return result;\r\n  }\r\n  get center():CGPoint{\r\n    return new CGPoint(this.canv.width/2,this.canv.height/2);\r\n  }\r\n\r\n  drawRulers(){\r\n    this.ctx.strokeStyle = `${Config.RULER_STROKE_STYLE}`;\r\n    this.ctx.lineWidth = Config.RULER_LINE_WIDTH;\r\n\r\n    let imageSize = this.presentationImage.currentSize;\r\n    //draw ruler\r\n    let imageHeight:number = 0;\r\n    let imageWidth:number = 0;\r\n    let verticalRulerUnit:number = -1;//[self computeVerticalRulerUnit];\r\n    let horizontalRulerUnit:number = -1;//[self computeHorizontalRulerUnit];\r\n    if (this.presentationImage.imageOrientation == UIImageOrientation.UIImageOrientationLeft ||\r\n      this.presentationImage.imageOrientation == UIImageOrientation.UIImageOrientationLeftMirrored ||\r\n      this.presentationImage.imageOrientation == UIImageOrientation.UIImageOrientationRight ||\r\n      this.presentationImage.imageOrientation == UIImageOrientation.UIImageOrientationRightMirrored) {\r\n      imageHeight = imageSize.width;\r\n      imageWidth = imageSize.height;\r\n      verticalRulerUnit =  this.computeHorizontalRulerUnit();\r\n      horizontalRulerUnit = this.computeVerticalRulerUnit();\r\n    }else{\r\n      imageHeight = imageSize.height;\r\n      imageWidth = imageSize.width;\r\n      verticalRulerUnit = this.computeVerticalRulerUnit();\r\n      horizontalRulerUnit = this.computeHorizontalRulerUnit();\r\n    }\r\n\r\n    let rectHeightCenter:number = this.center.y - this.frame.origin.y;\r\n    let rulerOriginY:number = rectHeightCenter - imageHeight/4;\r\n\r\n    {\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY);\r\n      this.ctx.lineTo(Config.RULER_MARGIN_LEFT,rectHeightCenter + imageHeight/4);\r\n      this.ctx.stroke();\r\n\r\n//       if (verticalRulerUnit > 0) {\r\n//         [RoiUtil drawTextAt:CGPointMake(RULER_MARGIN_LEFT + RULER_WIDTH / 2.0 + 8, rulerOriginY + imageHeight*4/16 + 8) withValue:[NSString stringWithFormat:@\"%.0f\",verticalRulerUnit] withColor:AxRulerColor];\r\n//\r\n//         //delete the following codes at 2013-10-17\r\n// //            if (self.presentationImage.pixelSpacingX != 0 && self.presentationImage.pixelSpacingY != 0) {\r\n// //                [RoiUtil drawTextAt:CGPointMake(RULER_MARGIN_LEFT + RULER_WIDTH / 2.0 + 8, rulerOriginY + imageHeight*4/16 + 18) withValue:@\"mm\" withColor:AxRulerColor];\r\n// //            }else if (self.presentationImage.imagerPixelSpacingX != 0 && self.presentationImage.imagerPixelSpacingY != 0) {\r\n// //                [RoiUtil drawTextAt:CGPointMake(RULER_MARGIN_LEFT + RULER_WIDTH / 2.0 + 8, rulerOriginY + imageHeight*4/16 + 18) withValue:@\"imager mm\" withColor:AxRulerColor];\r\n// //            }\r\n//         [RoiUtil drawTextAt:CGPointMake(RULER_MARGIN_LEFT + RULER_WIDTH / 2.0 + 8, rulerOriginY + imageHeight*4/16 + 18) withValue:@\"mm\" withColor:AxRulerColor];\r\n//       }\r\n\r\n      //1 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH ,rulerOriginY);\r\n    this.ctx.stroke();\r\n\r\n      //2 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2,rulerOriginY + imageHeight/16);\r\n    this.ctx.stroke();\r\n\r\n      //3 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*2/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*2/16);\r\n    this.ctx.stroke();\r\n\r\n      //4 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*3/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*3/16);\r\n    this.ctx.stroke();\r\n\r\n      //5 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*4/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*4/16);\r\n    this.ctx.stroke();\r\n\r\n      //6 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*5/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*5/16);\r\n    this.ctx.stroke();\r\n\r\n      //7 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*6/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*6/16);\r\n    this.ctx.stroke();\r\n\r\n      //8 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*7/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH /2, rulerOriginY + imageHeight*7/16);\r\n    this.ctx.stroke();\r\n\r\n      //9 line\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(Config.RULER_MARGIN_LEFT,rulerOriginY + imageHeight*8/16);\r\n    this.ctx.lineTo(Config.RULER_MARGIN_LEFT + Config.RULER_WIDTH, rulerOriginY + imageHeight*8/16);\r\n    this.ctx.stroke();\r\n    }\r\n\r\n    let rectWidthCenter:number = this.center.x - this.frame.origin.x;////;rect.origin.x + rect.size.width / 2;\r\n    let rulerOriginX:number = rectWidthCenter - imageWidth/4;\r\n\r\n    {\r\n      let paddingBottom:number = this.canv.height - Config.RULER_MARGIN_BOTTOM;\r\n      let paddingBottomEndLong:number = paddingBottom - Config.RULER_HEIGHT;\r\n      let paddingBottomEndShort:number = paddingBottom - Config.RULER_HEIGHT / 2;\r\n\r\n\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX,paddingBottom);\r\n      this.ctx.lineTo(rectWidthCenter + imageWidth/4, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //1 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX,paddingBottomEndLong);\r\n      this.ctx.lineTo(rulerOriginX, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //2 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //3 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*2/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*2/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //4 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*3/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*3/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //5 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*4/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*4/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //draw the ruler unit\r\n      if (horizontalRulerUnit > 0) {\r\n        ////delete the following codes at 2013-10-17\r\n//            if (self.presentationImage.pixelSpacingX != 0 && self.presentationImage.pixelSpacingY != 0) {\r\n//\r\n//                [RoiUtil drawTextAt:CGPointMake(rulerOriginX+imageWidth*4/16, paddingBottom + 10) withValue:[NSString stringWithFormat:@\"%.0f mm\",horizontalRulerUnit]  withColor:AxRulerColor];\r\n//            }else if (self.presentationImage.imagerPixelSpacingX != 0 && self.presentationImage.imagerPixelSpacingY != 0) {\r\n//\r\n//                [RoiUtil drawTextAt:CGPointMake(rulerOriginX+imageWidth*4/16, paddingBottom + 10) withValue:[NSString stringWithFormat:@\"%.0f imager mm\",horizontalRulerUnit]  withColor:AxRulerColor];\r\n//            }\r\n//         [RoiUtil drawTextAt:CGPointMake(rulerOriginX+imageWidth*4/16, paddingBottom + 10) withValue:[NSString stringWithFormat:@\"%.0f mm\",horizontalRulerUnit]  withColor:AxRulerColor];\r\n      }\r\n\r\n      //6 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*5/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*5/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //7 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*6/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*6/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //8 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*7/16,paddingBottomEndShort);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*7/16, paddingBottom);\r\n      this.ctx.stroke();\r\n\r\n      //9 line\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(rulerOriginX+imageWidth*8/16,paddingBottomEndLong);\r\n      this.ctx.lineTo(rulerOriginX+imageWidth*8/16, paddingBottom);\r\n      this.ctx.stroke();\r\n    }\r\n\r\n  }\r\n\r\n  displayRect():CGRect{\r\n    return new CGRect(0,  0, this.canv.width, this.canv.height);\r\n  }\r\n  removeLoadingImg(){\r\n\r\n    if(this.tileRootDivElement.contains(this.loadingImg)){\r\n      this.tileRootDivElement.removeChild(this.loadingImg);\r\n    }\r\n    if(this.tileRootDivElement.contains(this.errorImg)){\r\n      this.tileRootDivElement.removeChild(this.errorImg);\r\n    }\r\n  }\r\n\r\n  displayError(){\r\n    if(!this.tileRootDivElement.contains(this.errorImg)){\r\n      this.tileRootDivElement.appendChild(this.errorImg);\r\n    }\r\n  }\r\n\r\n\r\n  resize(imageBoxViewRect : CGRect){\r\n    this.frame = imageBoxViewRect;\r\n    if (this.selected) {\r\n      this.tileRootDivElement.setAttribute(\"style\",\r\n        `float: left;border:${Config.TILEVIEW_BORDOR_WIDTH}px solid ${Config.TILEBOXVIEW_SELECTED_COLOR};position: relative; width:${this.frame.width}px;height:${this.frame.height}px`);\r\n    } else {\r\n      this.tileRootDivElement.setAttribute(\"style\",\r\n        `float: left;border:${Config.TILEVIEW_BORDOR_WIDTH}px solid ${Config.TILEVIEW_UNSELECTED_COLOR};position: relative; width:${this.frame.width}px;height:${this.frame.height}px`);\r\n    }\r\n\r\n    this.canv.width =  this.frame.width - 2  * Config.TILEVIEW_BORDOR_WIDTH;\r\n    this.canv.height =  this.frame.height - 2  * Config.TILEVIEW_BORDOR_WIDTH;\r\n    this.canv.setAttribute(\"style\", `width:${this.canv.width}px;height:${this.canv.height}px`);\r\n\r\n    this.displayImage();\r\n  }\r\n\r\n\r\n  setWL(windowCenter : number, windowWidth : number){\r\n    if(this.presentationImage){\r\n      this.presentationImage.setWL(windowCenter, windowWidth);\r\n\r\n      this.displayImage();\r\n    }\r\n  }\r\n\r\n  rotate(degrees){\r\n    this.ctx.clearRect(0,0,this.canv.width,this.canv.height);\r\n    this.ctx.save();\r\n    this.ctx.translate(this.canv.width/2,this.canv.height/2);\r\n    this.ctx.rotate(degrees*Math.PI/180);\r\n    this.ctx.drawImage(this.presentationImage.currentDisplayImage,-this.presentationImage.currentDisplayImage.width/2,-this.presentationImage.currentDisplayImage.width/2);\r\n    this.ctx.restore();\r\n}\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/viewer/TileView.ts","/**\r\n * Created by binsirMac on 2017-01-09.\r\n */\r\n\r\nimport {Roi} from \"./Roi\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {PresentationImage} from \"../display/PresentationImage\";\r\nimport {Aesthetics} from \"../common/Aesthetics\";\r\n\r\nexport class AngleRoi implements Roi{\r\n  selected : boolean;\r\n  firstPointInOriginalImage:CGPoint;\r\n  secondPointInOriginalImage:CGPoint;\r\n  thirdPointInOriginalImage:CGPoint;\r\n\r\n  constructor(firstPointInOriginalImage:CGPoint,secondPointInOriginalImage:CGPoint,thirdPointInOriginalImage:CGPoint){\r\n    this.firstPointInOriginalImage = firstPointInOriginalImage;\r\n    this.secondPointInOriginalImage = secondPointInOriginalImage;\r\n    this.thirdPointInOriginalImage = thirdPointInOriginalImage;\r\n  }\r\n\r\n  drawRoiOnImage(context: any, presentationImage:PresentationImage){\r\n    context.lineWidth = Aesthetics.AxRoiSelectedLineWidth;\r\n\r\n    context.moveTo(this.firstPointInOriginalImage.x, this.firstPointInOriginalImage.y);\r\n\r\n    context.lineTo(this.secondPointInOriginalImage.x, this.secondPointInOriginalImage.y);\r\n\r\n    context.lineTo(this.thirdPointInOriginalImage.x, this.thirdPointInOriginalImage.y);\r\n\r\n    context.stroke();\r\n  }\r\n\r\n  checkSelectedWithPoint(pointInOriginImage : CGPoint, presentationImage : PresentationImage){\r\n\r\n  }\r\n\r\n  moveTo(pointInOriginImage : CGPoint, presentationImage : PresentationImage){\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/roi/AngleRoi.ts","import {PresentationImage} from \"./PresentationImage\";\r\nimport {Frame} from \"../model/Frame\";\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class DisplaySet{\r\n  presentationImages  : PresentationImage[] = [];\r\n\r\n  constructor(){}\r\n\r\n  static generateFromSeries(study : any, series : any){\r\n    let displaySet = new DisplaySet();\r\n\r\n    if(series != null && series.image != null){\r\n      let images =  series.image;\r\n\r\n      for (let image of images) {\r\n        let frames = this.generateFromImage(study, series, image);\r\n        for (let frame of frames) {\r\n          let presentationImage = new PresentationImage();\r\n          presentationImage.frameReference = frame;\r\n          presentationImage.parentDisplaySet = displaySet;\r\n          displaySet.presentationImages.push(presentationImage);\r\n        }\r\n      }\r\n    }\r\n    return displaySet;\r\n  }\r\n\r\n  static generateFromImage(study : any, series : any, image : any){\r\n    if(image.frames == 0){\r\n      let frame = new Frame(study, series, image, 1);\r\n      return [frame];\r\n    }\r\n    let frames : Frame[] = [];\r\n    for(let i = 1; i <= image.frames; i ++){\r\n      let frame = new Frame(study, series, image, i);\r\n      frames.push(frame);\r\n    }\r\n    return frames;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/display/DisplaySet.ts","import {TileView} from \"../viewer/TileView\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {Frame} from \"../model/Frame\";\r\nimport {DisplaySet} from \"./DisplaySet\";\r\nimport {CGSize} from \"../common/CGSize\";\r\nimport {CGRect} from \"../common/CGRect\";\r\nimport {RetrieveImageRequest} from \"../dto/RetrieveImageRequest\";\r\nimport {Config} from \"../Config\";\r\nimport {UIImageOrientation} from \"../common/UIImageOrientation\";\r\nimport {Roi} from \"../roi/Roi\";\r\nimport {ImageOrientType} from \"../common/ImageOrientType\";\r\nimport {OperationScope} from \"../common/OperationScope\";\r\nimport {ImageOperatingType} from \"../common/ImageOperatingType\";\r\nimport {ArrayUtils} from \"../common/ArrayUtils\";\r\nimport {EventDispatcher, EventTypes} from \"../common/EventDispatcher\";\r\nimport {LFService} from \"typescript-logging\";\r\n\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"PresentationImage\");\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class PresentationImage {\r\n  minWindowCenter: number;\r\n  maxWindowCenter: number;\r\n  minWindowWidth: number;\r\n  maxWindowWidth: number;\r\n  minAspectScale: number;\r\n  maxAspectScale: number;\r\n  currentSensitivity: number;\r\n  linked: boolean;\r\n  selected: boolean;\r\n  frameReference: Frame;\r\n  parentDisplaySet: DisplaySet;\r\n  parentTileView: TileView;\r\n  isUsingPreset: boolean;\r\n  currentDisplayImage: any;\r\n  isNeedToComputeLen:boolean = false;\r\n\r\n  preScopeLenCenterInImage:CGPoint;\r\n  preScopeOriginalImageSize:CGSize;\r\n\r\n  private _scaleAspectFit: boolean = true;\r\n  private _lensRect: CGRect;\r\n  private _inverted: boolean;\r\n  private _originalSize: CGSize;\r\n  private _aspectScale: number;\r\n  private _imageOrientation: UIImageOrientation;\r\n  //the len (0,0) at the image point, default is (0,0)\r\n  private _lenCenterAtImage: CGPoint;\r\n  private _currentWindowCenter: number;\r\n  private _currentWindowWidth: number;\r\n  private _pixelSpacingX: number;\r\n  private _pixelSpacingY: number;\r\n  private _imagerPixelSpacingX: number;\r\n  private _imagerPixelSpacingY: number;\r\n  private _samplesPerPixel: number;\r\n  private _derivationDescription: string;\r\n  private _windowCenter: number;\r\n  private _windowWidth: number;\r\n  private _bitAllocated: number;\r\n  private _bitsStored: number;\r\n  private _width: number;\r\n  private _height: number;\r\n  private _patientName: string;\r\n  private _patientId: string;\r\n  private _instanceNumber: string;\r\n\r\n  private rois : Roi[] = [];\r\n\r\n  constructor() {\r\n    this.imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n\r\n  }\r\n\r\n  get currentSize():CGSize{\r\n    return new CGSize(this.originalSize.width * this.aspectScale, this.originalSize.height* this.aspectScale);\r\n  }\r\n\r\n  get currentTileSize():CGSize{\r\n    return this.parentTileView.size;\r\n  }\r\n\r\n  get originalSize(): CGSize{\r\n    if(this._originalSize == null){\r\n      this._originalSize = new CGSize(this.width,this.height);\r\n    }\r\n    return this._originalSize;\r\n  }\r\n  get aspectScale():number{\r\n    if (this._aspectScale == null) {\r\n      //default in the image's center point width/2, heigt/2.\r\n      // this._aspectScale = new CGPoint(Math.ceil(this.width/2),Math.ceil(this.height/2));\r\n      if(this.parentTileView){\r\n        let rect = this.parentTileView.displayRect();\r\n        let sx = rect.width / this.frameReference.parentImageSop.width;\r\n        let sy = rect.height / this.frameReference.parentImageSop.height;\r\n        this._aspectScale = sx > sy ? sy : sx;\r\n      }\r\n    }\r\n\r\n    return this._aspectScale;\r\n  }\r\n\r\n  set aspectScale(value:number){\r\n    this.scaleAspectFit = false;\r\n    if(value != this._aspectScale){\r\n      let tempX = this.lenCenterAtImage.x - (this.aspectScale * this.width - this.width)/2;\r\n      if( tempX < this.parentTileView.displayRect().width && tempX > (- this.parentTileView.displayRect().width)){\r\n        this.lenCenterAtImage.x = tempX;\r\n      }\r\n\r\n      let tempY = this.lenCenterAtImage.y - (this.aspectScale * this.height - this.height)/2;\r\n      if(tempY < this.parentTileView.displayRect().height && tempY > (- this.parentTileView.displayRect().height )){\r\n        this.lenCenterAtImage.y = tempY;\r\n      }\r\n    }\r\n  }\r\n\r\n  get lenCenterAtImage():CGPoint{\r\n    if (this._lenCenterAtImage == null) {\r\n      //default in the image's center point width/2, heigt/2.\r\n      // this._lenCenterAtImage = new CGPoint(Math.ceil(this.width/2),Math.ceil(this.height/2));\r\n      this._lenCenterAtImage = new CGPoint(0,0);\r\n    }\r\n    return this._lenCenterAtImage;\r\n  }\r\n\r\n  get currentWindowCenter(): number {\r\n    if (this._currentWindowCenter == null) {\r\n      this._currentWindowCenter = this.windowCenter;\r\n    }\r\n    return this._currentWindowCenter;\r\n  }\r\n\r\n  get currentWindowWidth(): number {\r\n    if (this._currentWindowWidth == null) {\r\n      this._currentWindowWidth = this.windowWidth;\r\n    }\r\n    return this._currentWindowWidth;\r\n  }\r\n\r\n  get patientName(): string {\r\n    if (this._patientName == null) {\r\n      this._patientName = this.frameReference.parentStudy.patientsName;\r\n    }\r\n    return this._patientName;\r\n  }\r\n\r\n  get patientId(): string {\r\n    if (this._patientId == null) {\r\n      this._patientId = this.frameReference.parentStudy.patientId;\r\n    }\r\n    return this._patientId;\r\n  }\r\n\r\n  get instanceNumber(): string {\r\n    if (this._instanceNumber == null) {\r\n      this._instanceNumber = this.frameReference.parentImageSop.instanceNumber;\r\n    }\r\n    return this._instanceNumber;\r\n  }\r\n\r\n  get pixelSpacingX(): number {\r\n    if (this._pixelSpacingX == null) {\r\n      this._pixelSpacingX = this.frameReference.parentImageSop.pixelSpacingX;\r\n    }\r\n    return this._pixelSpacingX;\r\n  }\r\n\r\n  get pixelSpacingY(): number {\r\n    if (this._pixelSpacingY == null) {\r\n      this._pixelSpacingY = this.frameReference.parentImageSop.pixelSpacingY;\r\n    }\r\n    return this._pixelSpacingY;\r\n  }\r\n\r\n  get imagerPixelSpacingX(): number {\r\n    if (this._imagerPixelSpacingX == null) {\r\n      this._imagerPixelSpacingX = this.frameReference.parentImageSop.imagerPixelSpacingH;\r\n    }\r\n    return this._imagerPixelSpacingX;\r\n  }\r\n\r\n  get imagerPixelSpacingY(): number {\r\n    if (this._imagerPixelSpacingY == null) {\r\n      this._imagerPixelSpacingY = this.frameReference.parentImageSop.imagerPixelSpacingV;\r\n    }\r\n    return this._imagerPixelSpacingY;\r\n  }\r\n\r\n  get samplesPerPixel(): number {\r\n    if (this._samplesPerPixel == null) {\r\n      this._samplesPerPixel = this.frameReference.parentImageSop.samplesPerPixel;\r\n    }\r\n    return this._samplesPerPixel;\r\n  }\r\n\r\n  get derivationDescription(): string {\r\n    if (this._derivationDescription == null) {\r\n      this._derivationDescription = this.frameReference.parentImageSop.derivationDescription;\r\n    }\r\n    return this._derivationDescription;\r\n  }\r\n\r\n  get windowCenter(): number {\r\n    if (this._windowCenter == null) {\r\n      this._windowCenter = Number(this.frameReference.parentImageSop.windowCenter);\r\n    }\r\n    return this._windowCenter;\r\n  }\r\n\r\n  get windowWidth(): number {\r\n    if (this._windowWidth == null) {\r\n      this._windowWidth = Number(this.frameReference.parentImageSop.windowWidth);\r\n    }\r\n    return this._windowWidth;\r\n  }\r\n\r\n  get bitAllocated(): number {\r\n    if (this._bitAllocated == null) {\r\n      this._bitAllocated = this.frameReference.parentImageSop.bitAllocated;\r\n    }\r\n    return this._bitAllocated;\r\n  }\r\n\r\n  get bitsStored(): number {\r\n    if (this._bitsStored == null) {\r\n      this._bitsStored = this.frameReference.parentImageSop.bitsStored;\r\n    }\r\n    return this._bitsStored;\r\n  }\r\n\r\n  get width(): number {\r\n    if (this._width == null) {\r\n      this._width = this.frameReference.parentImageSop.width;\r\n    }\r\n    return this._width;\r\n  }\r\n\r\n  get height(): number {\r\n    if (this._height == null) {\r\n      this._height = this.frameReference.parentImageSop.height;\r\n    }\r\n    return this._height;\r\n  }\r\n\r\n  addRoi(roi:Roi){\r\n    this.rois.push(roi);\r\n  }\r\n\r\n  checkSelectedRoiWithPoint(pointInLens:CGPoint){\r\n    let result:boolean = false;\r\n//    CGPoint pointInOriginImage = [self convertToPointInOriginalImage:pointInLens];\r\n\r\n    this.rois.forEach(roi =>{\r\n      roi.selected = false;\r\n    });\r\n\r\n    this.rois.forEach(roi =>{\r\n      result = roi.checkSelectedWithPoint(pointInLens,this);\r\n      if (result) {\r\n        roi.selected = true;\r\n        return result;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n  getSelectedRoi():Roi{\r\n    this.rois.forEach(roi =>{\r\n      if (roi.selected) {\r\n        return roi;\r\n      }\r\n    });\r\n    return null;\r\n  }\r\n\r\n  removeSelectedRoi() {\r\n    let selectedRoi:Roi;\r\n    this.rois.forEach(roi =>{\r\n      if (roi.selected) {\r\n        selectedRoi = roi;\r\n      }\r\n    });\r\n    if (selectedRoi) {\r\n      ArrayUtils.removeByValue(this.rois,selectedRoi);\r\n    }else{\r\n      //if no roi selection, should remove the last one.\r\n      this.rois.pop();\r\n    }\r\n  }\r\n\r\n  get imageOrientation():UIImageOrientation{\r\n    return this._imageOrientation;\r\n  }\r\n  set imageOrientation(imageOrientation:UIImageOrientation){\r\n\r\n    this._imageOrientation = imageOrientation;\r\n\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n      EventDispatcher.getInstance().dispatch(EventTypes.PropagateNotification, this,\r\n        {'imageOrientation':this._imageOrientation,'isUsingPreset':this.isUsingPreset});\r\n    }\r\n  }\r\n\r\n  get inverted():boolean{\r\n    return this._inverted;\r\n  }\r\n\r\n  set inverted(inverted:boolean){\r\n    this._inverted = inverted;\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.PropagateNotification, this,\r\n        {'inverted':this.inverted,'isUsingPreset':this.isUsingPreset});\r\n    }\r\n  }\r\n  setAspectScale(aspectScale:number , zoomLocationInLens:CGPoint) {\r\n    this.aspectScale=aspectScale;\r\n//    _zoomLocationInLens = zoomLocationInLens;\r\n\r\n  }\r\n\r\n  get lensRect():CGRect{\r\n    return this._lensRect;\r\n  }\r\n\r\n  set lensRect(lensRect:CGRect) {\r\n    this._lensRect = lensRect;\r\n  }\r\n\r\n  set scaleAspectFit(scaleAspectFit:boolean) {\r\n    this._scaleAspectFit = scaleAspectFit;\r\n    if (scaleAspectFit) {\r\n      this.computeFitPresentation();\r\n    }\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.PropagateNotification, this,\r\n        {'scaleAspectFit':this.scaleAspectFit,'isUsingPreset':this.isUsingPreset});\r\n    }\r\n  }\r\n\r\n  computePresentationParams(){\r\n    let oldScale:number = this.aspectScale;\r\n\r\n    if (this.scaleAspectFit) {\r\n      this.computeFitPresentation();\r\n    }else{\r\n      let _currentTileSize:CGSize = this.currentTileSize;\r\n      this.updateDisplayParams(_currentTileSize);\r\n    }\r\n\r\n    if (oldScale != this._aspectScale) {\r\n\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.ScaleChangeNotification, this,\r\n        {'aspectScale':this.aspectScale});\r\n    };\r\n  }\r\n\r\n  updateDisplayParams(tileSize:CGSize) {\r\n    if (this.isNeedToComputeLen) {\r\n      let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n      switch (orientation) {\r\n        case UIImageOrientation.UIImageOrientationUp:\r\n        case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        case UIImageOrientation.UIImageOrientationDown:\r\n        case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        {\r\n          this._lensRect = new CGRect(this._lenCenterAtImage.x * this._aspectScale - tileSize.width / 2, this._lenCenterAtImage.y * this._aspectScale - tileSize.height / 2, tileSize.width, tileSize.height);\r\n        }\r\n          break;\r\n\r\n        case UIImageOrientation.UIImageOrientationLeft:\r\n        case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        case UIImageOrientation.UIImageOrientationRight:\r\n        case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        {\r\n\r\n          this._lensRect = new CGRect(this._lenCenterAtImage.x * this._aspectScale - tileSize.height / 2, this._lenCenterAtImage.y * this._aspectScale - tileSize.width / 2, tileSize.height, tileSize.width);\r\n        }\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  resetAllValuesFromNotif(){\r\n    this._currentWindowCenter = this.windowCenter;\r\n\r\n    this._currentWindowWidth = this.windowWidth;\r\n\r\n    this.isUsingPreset = false;\r\n\r\n    this._scaleAspectFit = true;\r\n    this._inverted = false;\r\n    this._imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n    let tileSize:CGSize = this.currentTileSize;\r\n    if (tileSize.width != 0 && tileSize.height !=0) {\r\n      this.resetLensAndCurrentSize(tileSize);\r\n    }\r\n    this.rois = [];\r\n\r\n  }\r\n  computeFitPresentation(){\r\n    let _currentTileSize:CGSize = this.currentTileSize;\r\n    let _originalImageSize:CGSize = this.originalSize;\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n      {\r\n        let sx:number = _currentTileSize.width / _originalImageSize.width;\r\n        let sy:number = _currentTileSize.height / _originalImageSize.height;\r\n        let newScale:number = Math.min(sx, sy);\r\n        this.lensRect = new CGRect((_originalImageSize.width * newScale-_currentTileSize.width)/2, (_originalImageSize.height * newScale-_currentTileSize.height)/2, _currentTileSize.width, _currentTileSize.height);\r\n\r\n        this.aspectScale = newScale;\r\n      }\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n      {\r\n        let sx:number = _currentTileSize.width / _originalImageSize.height;\r\n        let sy:number = _currentTileSize.height / _originalImageSize.width;\r\n        let newScale:number = Math.min(sx, sy);\r\n        this.lensRect = new CGRect((_originalImageSize.width * newScale-_currentTileSize.height)/2, (_originalImageSize.height * newScale-_currentTileSize.width)/2, _currentTileSize.height, _currentTileSize.width);\r\n\r\n        this.aspectScale = newScale;\r\n      }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  computeScalePresentation(){\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  computeLensRectWithOldTileSize(oldTileSize:CGSize){\r\n    let _currentTileSize:CGSize = this.currentTileSize;\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + oldTileSize.width / 2.0 - _currentTileSize.width / 2.0, this.lensRect.origin.y + oldTileSize.height / 2.0 - _currentTileSize.height / 2.0, _currentTileSize.width, _currentTileSize.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n\r\n        this.lensRect = new CGRect(this.lensRect.origin.x + oldTileSize.height / 2.0 - _currentTileSize.height / 2.0, this.lensRect.origin.y + oldTileSize.width / 2.0 - _currentTileSize.width / 2.0, _currentTileSize.height, _currentTileSize.width);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  reComputeLensSizeAgainstScope() {\r\n    //for the stored\r\n    this._lenCenterAtImage = new CGPoint(this.preScopeLenCenterInImage.x / this.preScopeOriginalImageSize.width * this.originalSize.width,\r\n      this.preScopeLenCenterInImage.y / this.preScopeOriginalImageSize.height *this.originalSize.height);\r\n  }\r\n\r\n\r\n  setTileViewSize(tileSize:CGSize,rotated:boolean,centerPoint:CGPoint){\r\n    if (this._scaleAspectFit) {\r\n      this.computeFitPresentation();\r\n      return;\r\n    }else{\r\n      if (rotated) {\r\n        this.isNeedToComputeLen = true;\r\n\r\n      }else{\r\n        this.isNeedToComputeLen = true;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  resetLensAndCurrentSize(tileSize:CGSize) {\r\n\r\n    let sx:number = tileSize.width / this.originalSize.width;\r\n    let sy:number = tileSize.height / this.originalSize.height;\r\n    let newScale:number = Math.min(sx, sy);\r\n\r\n    this.aspectScale = newScale;\r\n\r\n    //set the lens rect\r\n    this.lensRect = new CGRect((this.originalSize.width * this.aspectScale-tileSize.width)/2, (this.originalSize.height * this.aspectScale-tileSize.height)/2, tileSize.width, tileSize.height);\r\n\r\n  }\r\n  reset(){\r\n    this.resetAllValues();\r\n\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.ScaleChangeNotification, this,\r\n        {'resetToOriginal':'resetToOriginal'});\r\n    }\r\n  }\r\n\r\n  resetAllValues() {\r\n    this.isUsingPreset=false;\r\n    this.setWL(this.windowWidth,this.windowCenter);\r\n    this._scaleAspectFit = true;\r\n    this._inverted = true;\r\n    this._imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n    let tileSize:CGSize = this.currentTileSize;\r\n    if (tileSize.width != 0 && tileSize.height != 0 ) {\r\n      this.resetLensAndCurrentSize(tileSize);\r\n    }\r\n    this.rois =  [];\r\n\r\n  }\r\n\r\n  resizeImageWithScale(newScale:number,locationInLens:CGPoint,tileViewCenter:CGPoint){\r\n    /*remove the scale check at 2013-07-10\r\n     if (newScale > self.maxAspectScale || newScale < self.minAspectScale) {\r\n     return;\r\n     }*/\r\n    // recompute the lens rect\r\n    this.computeLensWithScale(newScale,locationInLens);\r\n\r\n//    [self setAspectScale:newScale withZoomLocationInLens:locationInLens];\r\n    this._aspectScale = newScale;\r\n    this._scaleAspectFit = false;\r\n\r\n    this._lenCenterAtImage =this.convertToPointInOriginalImage(tileViewCenter);\r\n\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.ScaleChangeNotification, this,\r\n        {'lensRect':this._lensRect,'aspectScale':this._aspectScale,'lenCenterInImage':this._lenCenterAtImage,\r\n          'originalImageSize':this.originalSize,'scaleAspectFit':this._scaleAspectFit,'isUsingPreset':this.isUsingPreset});\r\n    }\r\n// update the presentational properties\r\n//    self.zoomLocationInLens = locationInLens;\r\n//\r\n//    self.aspectScale = newScale;\r\n  }\r\n\r\n\r\n  computeLensWithScale(newScale:number,locationInLens:CGPoint){\r\n    let locationInOriginal :CGPoint= this.convertToPointInOriginalImage(locationInLens);\r\n\r\n    let orientation : UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    let _currentTileSize: CGSize = this.currentTileSize;\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        this.lensRect = new CGRect(locationInOriginal.x * newScale - locationInLens.x, locationInOriginal.y * newScale - locationInLens.y, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        this.lensRect = new CGRect(locationInLens.x - _currentTileSize.width + locationInOriginal.x * newScale, locationInOriginal.y * newScale - locationInLens.y, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        this.lensRect = new CGRect(locationInLens.x - _currentTileSize.width + locationInOriginal.x * newScale, locationInLens.y - _currentTileSize.height + locationInOriginal.y * newScale,\r\n          this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        this.lensRect = new CGRect(locationInOriginal.x * newScale - locationInLens.x, locationInLens.y - _currentTileSize.height + locationInOriginal.y * newScale, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        this.lensRect = new CGRect(locationInLens.y - _currentTileSize.height + locationInOriginal.x * newScale, locationInOriginal.y * newScale - locationInLens.x, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        this.lensRect = new CGRect(locationInOriginal.y * newScale - locationInLens.y, locationInOriginal.y * newScale - locationInLens.x, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        this.lensRect = new CGRect(locationInOriginal.x * newScale - locationInLens.y, locationInLens.x - _currentTileSize.width + locationInOriginal.y * newScale,  this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        this.lensRect = new CGRect(locationInLens.y - _currentTileSize.height + locationInOriginal.x * newScale, locationInLens.x - _currentTileSize.width + locationInOriginal.y * newScale, this.lensRect.size.width, this.lensRect.size.height);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.isNeedToComputeLen = false;\r\n\r\n  }\r\n\r\n\r\n  changed(widthStep:number,centerStep:number) {\r\n\r\n//    CGFloat newWindowCenter = self.currentWindowCenter + centerStep;//self.currentSensitivity * centerStep;//(self.currentSensitivity * centerStep/self.bitDepth);\r\n//    CGFloat newWindowWidth = self.currentWindowWidth + widthStep;//self.currentSensitivity * widthStep;//(self.currentSensitivity * widthStep/self.bitDepth);\r\n    let newWindowCenter : number= this.currentWindowCenter + this.currentSensitivity * centerStep;//(self.currentSensitivity * centerStep/self.bitDepth);\r\n    let newWindowWidth : number = this.currentWindowWidth + this.currentSensitivity * widthStep;//(self.currentSensitivity * widthStep/self.bitDepth);\r\n\r\n\r\n    //window width(0028,1051) shall always be greater than or equal to 1\r\n    if(newWindowWidth<1){\r\n      newWindowWidth = 1;\r\n    }\r\n\r\n//    NSLog(@\"window level - width :%f center :%f\",newWindowWidth,newWindowCenter);\r\n    this.setWL(newWindowWidth,newWindowCenter);\r\n  }\r\n\r\n  convertToPointInOriginalImage(locationInLens:CGPoint):CGPoint{\r\n    return this.convertToPointInOriginalImageWithScale(locationInLens,this.aspectScale);\r\n  }\r\n\r\n  convertToPointInOriginalImageWithScale(locationInLens:CGPoint, scale:number):CGPoint {\r\n    let _currentTileSize:CGSize = this.currentTileSize;\r\n    let locationInOldImage:CGPoint;\r\n\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + locationInLens.x, this.lensRect.origin.y + locationInLens.y);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + _currentTileSize.width - locationInLens.x , this.lensRect.origin.y + locationInLens.y);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + _currentTileSize.width - locationInLens.x, this.lensRect.origin.y + _currentTileSize.height - locationInLens.y);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + locationInLens.x, this.lensRect.origin.y + _currentTileSize.height - locationInLens.y);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + _currentTileSize.height -locationInLens.y, this.lensRect.origin.y + locationInLens.x);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + locationInLens.y, this.lensRect.origin.y + locationInLens.x);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + locationInLens.y , this.lensRect.origin.y + _currentTileSize.width - locationInLens.x);\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        locationInOldImage = new CGPoint(this.lensRect.origin.x + _currentTileSize.height -  locationInLens.y , this.lensRect.origin.y + _currentTileSize.width - locationInLens.x);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    let locationInOriginalImage:CGPoint = new CGPoint(locationInOldImage.x / scale, locationInOldImage.y / scale);\r\n\r\n    return locationInOriginalImage;\r\n  }\r\n\r\n  convertFromOriginalImageToLens(locationInOriginal:CGPoint):CGPoint {\r\n    let _currentTileSize:CGSize = this.currentTileSize;\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    let currentAspectScale:number = this.aspectScale;\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        return new CGPoint(locationInOriginal.x * currentAspectScale - this.lensRect.origin.x, locationInOriginal.y * currentAspectScale - this.lensRect.origin.y);\r\n\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        return new CGPoint(this.lensRect.origin.x + _currentTileSize.width - locationInOriginal.x * currentAspectScale, locationInOriginal.y * currentAspectScale - this.lensRect.origin.y);\r\n\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        return new CGPoint(this.lensRect.origin.x + _currentTileSize.width - locationInOriginal.x * currentAspectScale, this.lensRect.origin.y + _currentTileSize.height - locationInOriginal.y * currentAspectScale);\r\n\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        return new CGPoint(locationInOriginal.x * currentAspectScale - this.lensRect.origin.x, this.lensRect.origin.y + _currentTileSize.height - locationInOriginal.y * currentAspectScale);\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        return new CGPoint(locationInOriginal.y * currentAspectScale - this.lensRect.origin.y, this.lensRect.origin.x + _currentTileSize.height - locationInOriginal.x * currentAspectScale);\r\n\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        return new CGPoint(locationInOriginal.y * currentAspectScale - this.lensRect.origin.y, locationInOriginal.x * currentAspectScale - this.lensRect.origin.x );\r\n\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        return new CGPoint(this.lensRect.origin.y + _currentTileSize.width - locationInOriginal.y * currentAspectScale, locationInOriginal.x * currentAspectScale - this.lensRect.origin.x);\r\n\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        return new CGPoint( this.lensRect.origin.y + _currentTileSize.width - locationInOriginal.y * currentAspectScale, this.lensRect.origin.x + _currentTileSize.height - locationInOriginal.x * currentAspectScale);\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  convertToPointInNewImageWithScale(locationInLens:CGPoint,newScale:number):CGPoint{\r\n    let locationInOriginalImage:CGPoint = this.convertToPointInOriginalImage(locationInLens);//CGPointMake(locationInLens.x + _lensRect.origin.x, locationInLens.y + _lensRect.origin.y);\r\n\r\n    let locationInNewImage:CGPoint = this.convertFromOriginalImageToLens(locationInOriginalImage);//CGPointMake(locationInOriginalImage.x * newScale, locationInOriginalImage.y * newScale);\r\n\r\n    return locationInNewImage;\r\n  }\r\n\r\n\r\n  //finite-state machine\r\n  orientImageWith(orientType:ImageOrientType){\r\n    switch (this.imageOrientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUpMirrored;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDownMirrored;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeft;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRight;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDown;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeftMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRightMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRightMirrored;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeftMirrored;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDown;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRight;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeft;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDownMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUpMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDownMirrored;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUpMirrored;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRight;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeft;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDown;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRightMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeftMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeftMirrored;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRightMirrored;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUp;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n          {\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDown;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n          }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        switch (orientType) {\r\n          case ImageOrientType.FlipHoriz:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationLeft;\r\n            break;\r\n          case ImageOrientType.FlipVert:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationRight;\r\n            break;\r\n          case ImageOrientType.RotateLeft:\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationUpMirrored;\r\n            break;\r\n          case ImageOrientType.RotateRight:\r\n            this.imageOrientation = UIImageOrientation.UIImageOrientationDownMirrored;\r\n            if (!this.scaleAspectFit) {\r\n              this.lensRect = new CGRect(this.lensRect.origin.x + this.lensRect.size.width / 2.0 - this.lensRect.size.height / 2.0, this.lensRect.origin.y + this.lensRect.size.height / 2.0 - this.lensRect.size.width / 2.0, this.lensRect.size.height, this.lensRect.size.width);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (this.scaleAspectFit) {\r\n      this.computeFitPresentation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Draw the presentation image in the given client Rect under the context\r\n   *\r\n   * @param rect\r\n   * @param context\r\n   */\r\n  drawInRect(rect:CGRect,context: any) {\r\n    // let rect: CGRect = this.lensRect;//this.parentTileView.displayRect();\r\n\r\n    logger.info(\"draw the image in the rect,X:\"+rect.x+\",Y:\"+rect.y+\",width:\"+rect.width+\",height:\"+rect.height);\r\n    let img = new Image();\r\n    if(Config.imageOperatingType == ImageOperatingType.ImageOperatingTypeMeasure){\r\n      //draw the roi\r\n      this.drawRois(context);\r\n\r\n    }else {\r\n      img.onload = (() => {\r\n        if(this.parentTileView == null){\r\n          return;\r\n        }\r\n        this.parentTileView.removeLoadingImg();\r\n\r\n        let imgWidth = img.width;\r\n        let imgHeight = img.height;\r\n\r\n        if(this.inverted){\r\n          let imgData : ImageData = this.loadFromImage(img);\r\n          for (let i = 0; i < imgData.data.length; i += 4) {\r\n            imgData.data[i] = 255 - imgData.data[i];\r\n            imgData.data[i+1] = 255 - imgData.data[i+1];\r\n            imgData.data[i+2] = 255 - imgData.data[i+2];\r\n            imgData.data[i+3] = 255;\r\n          }\r\n          context.putImageData(imgData,(rect.width - imgWidth)/2, (rect.height - imgHeight)/2);\r\n\r\n        }else{\r\n          context.drawImage(img,(rect.width - imgWidth)/2, (rect.height - imgHeight)/2, imgWidth, imgHeight);\r\n        }\r\n\r\n        //draw the roi\r\n        this.drawRois(context);\r\n\r\n        //draw the rulers\r\n        this.parentTileView.drawRulers();\r\n\r\n        this.currentDisplayImage = img;\r\n      });\r\n      img.onerror=(e=> {\r\n        console.log(e);\r\n        this.parentTileView.removeLoadingImg();\r\n        this.parentTileView.displayError();\r\n      });\r\n      img.crossOrigin='Anonymous';\r\n      img.src = this.generateURL(rect);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * decode the jpeg image downloaded from AxVS.\r\n   *\r\n   * @param img\r\n   * @returns {ImageData}\r\n   */\r\n  loadFromImage(img: any) : ImageData{\r\n    let w = img.width;\r\n    let h = img.height;\r\n\r\n    let canvas = document.createElement(\"canvas\");\r\n    canvas.width = w;\r\n    canvas.height = h;\r\n    let ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(img, 0, 0);\r\n    return ctx.getImageData(0, 0, w, h);    // some browsers synchronously decode image here\r\n  }\r\n\r\n  generateURL(rect: CGRect): string {\r\n    return `${Config.AXVS_ADDRESS}/services/image?access_token=${Config.AXVS_ACCESS_TOKEN}&` + this.convert2RetrieveImageRequest(rect).toURI();\r\n  }\r\n\r\n  changeWindowLevel(widthStep: number, centerStep: number) {\r\n    this._currentWindowCenter = this._currentWindowCenter + centerStep;\r\n    this._currentWindowWidth = this._currentWindowWidth + widthStep;\r\n  }\r\n\r\n  convert2RetrieveImageRequest(rect: CGRect): RetrieveImageRequest {\r\n    let newRetrieveImageRequest = new RetrieveImageRequest();\r\n    newRetrieveImageRequest.studyUID = this.frameReference.parentStudy.studyUID;\r\n    newRetrieveImageRequest.seriesUID = this.frameReference.parentSeries.seriesUID;\r\n    newRetrieveImageRequest.objectUID = this.frameReference.parentImageSop.imageUID;\r\n    /**\r\n     * From 1 to n.\r\n     */\r\n    newRetrieveImageRequest.frameNumber = this.frameReference.parentImageSop.frames;\r\n    //newRetrieveImageRequest.hasOverlay = number;\r\n    //background : string;\r\n    //tiles : string;\r\n    newRetrieveImageRequest.windowWidth = Math.round(this.currentWindowWidth);\r\n    newRetrieveImageRequest.windowCenter = Math.round(this.currentWindowCenter);\r\n    if (this.aspectScale == null) {\r\n      let sx = rect.width / this.frameReference.parentImageSop.width;\r\n      let sy = rect.height / this.frameReference.parentImageSop.height;\r\n      this.aspectScale = sx > sy ? sy : sx;\r\n      // newRetrieveImageRequest.zoom = this.aspectScale;\r\n    } //else {\r\n      //compRate : number;\r\n    if (this.parentTileView) {\r\n      newRetrieveImageRequest.viewWidth = Math.round(rect.width);\r\n      newRetrieveImageRequest.viewHeight = Math.round(rect.height);\r\n      // newRetrieveImageRequest.originX = this.parentTileView.frame.x;\r\n      // newRetrieveImageRequest.originY = this.parentTileView.frame.y;\r\n      newRetrieveImageRequest.originX = this.lenCenterAtImage.x;\r\n      newRetrieveImageRequest.originY = this.lenCenterAtImage.y;\r\n    }\r\n    newRetrieveImageRequest.zoom = this.aspectScale;\r\n    // }\r\n\r\n    // zoomMethod : string;\r\n    //roiType : string;\r\n    //roiLeft : string;\r\n    //roiRight : string;\r\n    //roiBottom : string;\r\n    //roiTop : string;\r\n    //modalityLutIndex : number;\r\n    //voiLutIndex : number;\r\n    //isKeyOperation : number;\r\n    return newRetrieveImageRequest;\r\n  }\r\n\r\n\r\n  setWL(windowCenter: number, windowWidth: number) {\r\n    this._currentWindowCenter = windowCenter;\r\n    this._currentWindowWidth = windowWidth;\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n\r\n      EventDispatcher.getInstance().dispatch(EventTypes.ScaleChangeNotification, this,\r\n        {'currentWindowCenter':this.currentWindowCenter,'currentWindowWidth':this.currentWindowWidth,'isUsingPreset':this.isUsingPreset});\r\n    }\r\n  }\r\n\r\n  drawRois(context: any){\r\n    for(let roi of this.rois){\r\n      roi.drawRoiOnImage(context, this);\r\n    }\r\n  }\r\n\r\n  fminf(sx:number, sy:number):number{\r\n    return sx>sy?sy:sx;\r\n  }\r\n\r\n\r\n  moveToXToY(x:number, y:number){\r\n    let point:CGPoint=new CGPoint(x, y);\r\n    let lensRect:CGRect = this.lensRect;\r\n\r\n    let lensCenter:CGPoint = this.parentTileView.center;\r\n    lensCenter = new CGPoint(lensCenter.x - this.parentTileView.frame.origin.x, lensCenter.y - this.parentTileView.frame.origin.y);\r\n\r\n    let xLens:number,yLens:number,xCenterLens:number,yCenterLens:number;\r\n    let orientation:UIImageOrientation = this.imageOrientation;//[self getImageCurrentOrientation];\r\n    switch (orientation) {\r\n      case UIImageOrientation.UIImageOrientationUp:\r\n        xLens=lensRect.origin.x - point.x;\r\n        yLens=lensRect.origin.y - point.y;\r\n        xCenterLens = lensCenter.x - point.x;\r\n        yCenterLens = lensCenter.y - point.y;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationUpMirrored:\r\n        xLens=lensRect.origin.x + point.x;\r\n        yLens=lensRect.origin.y - point.y;\r\n        xCenterLens = lensCenter.x + point.x;\r\n        yCenterLens = lensCenter.y - point.y;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDown:\r\n        xLens=lensRect.origin.x + point.x;\r\n        yLens=lensRect.origin.y + point.y;\r\n        xCenterLens = lensCenter.x + point.x;\r\n        yCenterLens = lensCenter.y + point.y;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationDownMirrored:\r\n        xLens=lensRect.origin.x - point.x;\r\n        yLens=lensRect.origin.y + point.y;\r\n        xCenterLens = lensCenter.x - point.x;\r\n        yCenterLens = lensCenter.y + point.y;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeftMirrored:\r\n        xLens=lensRect.origin.x - point.y;\r\n        yLens=lensRect.origin.y - point.x;\r\n        xCenterLens = lensCenter.x - point.y;\r\n        yCenterLens = lensCenter.y - point.x;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRight:\r\n        xLens=lensRect.origin.x - point.y;\r\n        yLens=lensRect.origin.y + point.x;\r\n        xCenterLens = lensCenter.x - point.y;\r\n        yCenterLens = lensCenter.y + point.x;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationRightMirrored:\r\n        xLens=lensRect.origin.x + point.y;\r\n        yLens=lensRect.origin.y + point.x;\r\n        xCenterLens = lensCenter.x + point.y;\r\n        yCenterLens = lensCenter.y + point.x;\r\n        break;\r\n\r\n      case UIImageOrientation.UIImageOrientationLeft:\r\n        xLens=lensRect.origin.x + point.y;\r\n        yLens=lensRect.origin.y - point.x;\r\n        xCenterLens = lensCenter.x + point.y;\r\n        yCenterLens = lensCenter.y - point.x;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.lensRect = new CGRect(xLens, yLens, lensRect.size.width, lensRect.size.height);\r\n    this.scaleAspectFit = false;\r\n    this.isNeedToComputeLen = false;\r\n    this._lenCenterAtImage = this.convertToPointInOriginalImage(lensCenter);\r\n\r\n    if (Config.AxOperationScope != OperationScope.ImageScope) {\r\n      // NSDictionaryy * info = [NSDictionary dictionaryWithObjectsAndKeys:\r\n      // [NSValue valueWithCGRect:_lensRect],   @\"lensRect\",\r\n      // [NSString stringWithFormat:@\"%f\",_aspectScale],   @\"aspectScale\",\r\n      // [NSValue valueWithCGSize:self.originalSize],   @\"originalImageSize\",\r\n      // [NSValue valueWithCGPoint:_lenCenterAtImage],   @\"lenCenterInImage\",\r\n      // [NSString stringWithFormat:@\"%d\",_scaleAspectFit],   @\"scaleAspectFit\",\r\n      // [NSString stringWithFormat:@\"%d\",_isUsingPreset],   @\"isUsingPreset\",\r\n      // nil];\r\n      // [[NSNotificationCenter defaultCenter] postNotificationName:AxPropagateNotification object:self userInfo:info];\r\n    }\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/display/PresentationImage.ts","/**\r\n * Created by binsirMac on 2016-12-28.\r\n */\r\nexport class RetrieveImageRequest{\r\n  studyUID : string;\r\n  seriesUID : string;\r\n  objectUID : string;\r\n  /**\r\n   * From 1 to n.\r\n   */\r\n  frameNumber : number;\r\n  hasOverlay : number;\r\n  background : string;\r\n  tiles : string;\r\n  windowWidth : number;\r\n  windowCenter : number;\r\n  compRate : number;\r\n  viewWidth : number;\r\n  viewHeight : number;\r\n  originX : number;\r\n  originY : number;\r\n  zoom : number;\r\n  zoomMethod : string;\r\n  roiType : string;\r\n  roiLeft : string;\r\n  roiRight : string;\r\n  roiBottom : string;\r\n  roiTop : string;\r\n  modalityLutIndex : number;\r\n  voiLutIndex : number;\r\n  isKeyOperation : number;\r\n\r\n  construct(){}\r\n\r\n  toURI(){\r\n    //let result = `studyUID=${this.studyUID}&seriesUID=${this.seriesUID}&objectUID=${this.objectUID}&frameNumber=${this.frameNumber}&hasOverlay=${this.hasOverlay}&background=${this.background}&tiles=${this.tiles}&windowWidth=${this.windowWidth}&windowCenter=${this.windowCenter}&compRate=${this.compRate}&viewWidth=${this.viewWidth}&viewHeight=${this.viewHeight}&originX=${this.originX}&originY=${this.originY}&zoom=${this.zoom}&zoomMethod=${this.zoomMethod}&roiType=${this.roiType}&roiLeft=${this.roiLeft}&roiRight=${this.roiRight}&roiBottom=${this.roiBottom}&roiTop=${this.roiTop}&modalityLutIndex=${this.modalityLutIndex}&voiLutIndex=${this.voiLutIndex}&isKeyOperation=${this.isKeyOperation}`;\r\n    let result = `studyUID=${this.studyUID}&seriesUID=${this.seriesUID}&objectUID=${this.objectUID}`;\r\n    if(this.windowWidth){\r\n      result = result + `&windowWidth=${this.windowWidth}`;\r\n    }\r\n    if(this.windowCenter){\r\n      result = result + `&windowCenter=${this.windowCenter}`;\r\n    }\r\n    if(this.zoom){\r\n      result = result + `&zoom=${this.zoom}&zoomMethod=Interpolation`;\r\n    }\r\n    if(this.viewWidth){\r\n      result = result + `&viewWidth=${this.viewWidth}`;\r\n    }\r\n    if(this.viewHeight){\r\n      result = result + `&viewHeight=${this.viewHeight}`;\r\n    }\r\n    //the dicom image in the view Coordinate\r\n    if(this.originX){\r\n      result = result + `&originX=${this.originX}`;\r\n    }\r\n    if(this.originY){\r\n      result = result + `&originY=${this.originY}`;\r\n    }\r\n    return result.replace(/undefined/g,'');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/dto/RetrieveImageRequest.ts","/**\r\n * Created by kai on 22/10/2017.\r\n */\r\nexport enum ImageOrientType{\r\n  RotateLeft, //-90\r\n  RotateRight,           //+90\r\n  FlipHoriz,\r\n  FlipVert\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/ImageOrientType.ts","/**\r\n * Created by binsirMac on 2016-12-27.\r\n */\r\n/** Models an event with a generic sender and generic arguments */\r\nexport enum EventTypes {\r\n  SelectTileView,\r\n  ChangeOperatingType,\r\n  Resize,\r\n  PanImage,\r\n  ChangePreset,\r\n  PlayCine,\r\n  PausedCine,\r\n  ScaleChangeNotification,\r\n  PropagateNotification,\r\n  OverlayChangeNotification,\r\n  NeedsDisplayNotification\r\n}\r\n\r\ninterface IEvent<TEventType, TSender, TArgs> {\r\n\r\n  subscribe(eventType : TEventType, fn: (sender: TSender, args: TArgs) => void): void;\r\n\r\n  unsubscribe(eventType : TEventType, fn: (sender: TSender, args: TArgs) => void): void;\r\n}\r\n\r\n/** The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of the event */\r\nexport class EventDispatcher<TEventType, TSender, TArgs> implements IEvent<TEventType, TSender, TArgs> {\r\n\r\n  // for the Singleton\r\n  private static instance: EventDispatcher<any, any, any> ;\r\n  private constructor() {\r\n    // do something construct...\r\n  }\r\n\r\n  static getInstance() {\r\n    if (!EventDispatcher.instance) {\r\n      EventDispatcher.instance = new EventDispatcher<any, any, any>();\r\n      // ... any one time initialization goes here ...\r\n    }\r\n    return EventDispatcher.instance;\r\n  }\r\n\r\n  private _subscriptions: Map< TEventType,Array<(sender: TSender, args: TArgs) => void>> = new Map<TEventType,Array<(sender: TSender, args: TArgs) => void>> ();\r\n\r\n  clear(){\r\n    this._subscriptions.clear();\r\n  }\r\n\r\n  subscribe(eventType : TEventType ,fn: (sender: TSender, args: TArgs) => void): void {\r\n    let actions : Array<(sender: TSender, args: TArgs) => void> = this._subscriptions.get(eventType);\r\n    if (actions == null) {\r\n      actions =  new Array<(sender: TSender, args: TArgs) => void>();\r\n      this._subscriptions.set(eventType, actions);\r\n    }\r\n    actions.push(fn);\r\n  }\r\n\r\n  unsubscribe(eventType : TEventType, fn: (sender: TSender, args: TArgs) => void): void {\r\n    let actions : Array<(sender: TSender, args: TArgs) => void> = this._subscriptions.get(eventType);\r\n    if (actions){\r\n      let i = actions.indexOf(fn);\r\n      if (i > -1) {\r\n        actions.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  dispatch(eventType : TEventType,sender: TSender, args: TArgs): void {\r\n    if(this._subscriptions){\r\n      if(this._subscriptions.get(eventType)){\r\n        for (let handler of this._subscriptions.get(eventType)) {\r\n          handler(sender, args);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/EventDispatcher.ts","/**\r\n * Created by kai on 28/10/2017.\r\n */\r\nexport class ArrayUtils{\r\n  static removeByValue(arr, val) {\r\n    for(var i=0; i<arr.length; i++) {\r\n      if(arr[i] == val) {\r\n        arr.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/ArrayUtils.ts","/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class Frame{\r\n  width              : number;\r\n  samplesPerPixel    : number;\r\n  compressionRatio   : string;\r\n  patientPosition    : string;\r\n\r\n  constructor(public parentStudy : any,public parentSeries : any,public parentImageSop : any, public frameNumber : number){}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/model/Frame.ts","import {Config} from \"../Config\";\r\n\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class StreamJSONStudyLoader {\r\n  constructor(private studyUID: string,\r\n              private studyStatus: string) {\r\n\r\n  }\r\n\r\n  load() {\r\n    return this.loadFromAxVS(`${Config.AXVS_ADDRESS}/services/query?studyUID=${this.studyUID}&studyStatus=MATCHED,UNMATCHED,NULL,VERIFIED,COMPLETED&viewer=flex&userId=&userName=&location=&workstationId=&displayName=&requestSys=&rowGuid=&access_token=${Config.AXVS_ACCESS_TOKEN}`).then((study) => {\r\n      console.log(\"Success!\", study);\r\n      //construct the Study Model\r\n      //then return the new promise\r\n      return new Promise(\r\n        (resolve, reject) => {\r\n          resolve(study);\r\n        }\r\n      )\r\n    }, (error) => {\r\n      console.error(\"Failed!\", error);\r\n      return new Promise(\r\n        (resolve, reject) => {\r\n          reject(error);\r\n        }\r\n      )\r\n    });\r\n  }\r\n  \r\n  createAuthorizationCode(userId, pwd) {\r\n\t\tvar base64Code = \"Basic \";\r\n\t\tvar sourceString = userId + \":\" + pwd;\r\n\t\tvar encoder = window.btoa(sourceString);\r\n\t\tbase64Code = base64Code + encoder;\r\n\t\treturn base64Code;\r\n\t}\r\n\r\n  loadFromAxVS(url) {\r\n    // Return a new promise.\r\n    return new Promise((resolve, reject) => {\r\n      // Do the usual XHR stuff\r\n      var req = new XMLHttpRequest();\r\n      req.open('GET', url);\r\n\t  req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n\t  req.setRequestHeader(\"Authorization\", this.createAuthorizationCode('doctor','doctor'));\r\n\r\n      req.onload = function () {\r\n        // This is called even on 404 etc\r\n        // so check the status\r\n        if (req.status == 200) {\r\n          // Resolve the promise with the response text\r\n          let response = JSON.parse(req.response);\r\n          if (response.status == 'Success'){\r\n            if(response.studyList.study.length == 1){\r\n              resolve(response.studyList.study[0]);\r\n            }else{\r\n              reject(Error('Error return the study size.'));\r\n            }\r\n          }else{\r\n            reject(Error('The selected study does not exist.'));\r\n          }\r\n        }\r\n        else {\r\n          // Otherwise reject with the status text\r\n          // which will hopefully be a meaningful error\r\n          reject(Error(req.statusText));\r\n        }\r\n      };\r\n\r\n      // Handle network errors\r\n      req.onerror = function () {\r\n        reject(Error(\"Network Error\"));\r\n      };\r\n\r\n      // Make the request\r\n      req.send();\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/loader/StreamJSONStudyLoader.ts","import {LFService} from \"typescript-logging\";\r\nimport {RoiTool} from \"./RoiTool\";\r\nimport {RoiUtil} from \"./RoiUtil\";\r\nimport {TileView} from \"../viewer/TileView\";\r\nimport {Aesthetics} from \"../common/Aesthetics\";\r\nimport {AngleRoi} from \"./AngleRoi\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {LinearRoi} from \"./LinearRoi\";\r\nimport {PresentationImage} from \"../display/PresentationImage\";\r\n/**\r\n * Created by kai on 24/10/2017.\r\n */\r\n\r\nconst factory = LFService.createLoggerFactory();\r\nexport const logger = factory.getLogger(\"LinearRoiTool\");\r\nexport class LinearRoiTool implements RoiTool{\r\n\r\n  private static instance:LinearRoiTool = new LinearRoiTool();\r\n\r\n  private drawing:boolean =false;\r\n\r\n  static shareLinearRoiTool():LinearRoiTool{\r\n    return LinearRoiTool.instance;\r\n  }\r\n\r\n  private trackingTouches:Array<CGPoint> = new Array();\r\n  private startPoints:Array<CGPoint> = new Array();\r\n\r\n  removeAllPoint(){\r\n    this.trackingTouches = new Array();\r\n  }\r\n\r\n  isDrawing():boolean{\r\n    return this.drawing;\r\n  }\r\n  clearRoiTool(){\r\n    this.removeAllPoint();\r\n  }\r\n\r\n  touchesBegan(touch:CGPoint, touchedTileView:TileView){\r\n    logger.info('begin to draw the angel');\r\n    if(this.drawing){\r\n      return;\r\n    }\r\n    this.drawing = true;\r\n    this.trackingTouches.push(touch);\r\n    let location:CGPoint = touchedTileView.getCanvasPos(touch);\r\n    this.startPoints.push(location);\r\n  }\r\n\r\n  touchesCancelled(touch:CGPoint, touchedTileView:TileView){\r\n    this.drawing = false;\r\n    this.trackingTouches = new Array();\r\n    this.startPoints = new Array();\r\n  }\r\n\r\n  touchesMoved(touch:CGPoint, touchedTileView:TileView){\r\n\r\n  }\r\n\r\n  touchesEnded(touch:CGPoint, touchedTileView:TileView){\r\n    {\r\n      let touchIndex : number = this.trackingTouches.indexOf(touch);\r\n      if (touchIndex )\r\n      {\r\n        let startPoint : CGPoint= this.startPoints[touchIndex];\r\n        let endPoint : CGPoint = touchedTileView.getCanvasPos(touch);\r\n\r\n        let startPointInOriginalImage : CGPoint = touchedTileView.presentationImage.convertToPointInOriginalImage(startPoint);\r\n        let endPointInOriginalImage : CGPoint= touchedTileView.presentationImage.convertToPointInOriginalImage(endPoint);\r\n        let length :number = RoiUtil.computeLengthFrom(startPointInOriginalImage,endPointInOriginalImage,touchedTileView.presentationImage);\r\n        let linearRoi : LinearRoi = new LinearRoi(startPointInOriginalImage,endPointInOriginalImage,length);\r\n\r\n        touchedTileView.presentationImage.addRoi(linearRoi);\r\n        this.drawing = false;\r\n        this.trackingTouches.splice(touchIndex, 1);\r\n        this.startPoints.splice(touchIndex, 1);\r\n      }\r\n    }\r\n\r\n    this.trackingTouches = new Array();\r\n    this.startPoints= new Array();\r\n  }\r\n\r\n  drawTemporaryIn(touchedTileView:TileView, context:CanvasRenderingContext2D){\r\n    let presentationImage:PresentationImage = touchedTileView.presentationImage;\r\n    this.trackingTouches.forEach((touch, index) => {\r\n      let startPoint:CGPoint = this.startPoints[index];\r\n      let endPoint:CGPoint = touchedTileView.getCanvasPos(touch);\r\n\r\n      RoiUtil.drawLineFrom(context,startPoint,endPoint , true);\r\n\r\n      RoiUtil.drawVertiexAt(startPoint,context);\r\n\r\n      RoiUtil.drawVertiexAt(endPoint,context);\r\n\r\n      //2. draw the value\r\n      let startPointInOriginalImage : CGPoint = presentationImage.convertToPointInOriginalImage(startPoint);\r\n      let endPointInOriginalImage : CGPoint= presentationImage.convertToPointInOriginalImage(endPoint);\r\n      let length:number = RoiUtil.computeLengthFrom(startPointInOriginalImage,endPointInOriginalImage ,presentationImage);\r\n      let pixelSpacingX :number = presentationImage.pixelSpacingX;\r\n      let pixelSpacingY :number= presentationImage.pixelSpacingY;\r\n      let imagerPixelSpacingX :number= presentationImage.imagerPixelSpacingX;\r\n      let imagerPixelSpacingY :number= presentationImage.imagerPixelSpacingY;\r\n\r\n      let lengthTextValue:string = 'ts';\r\n      // if (pixelSpacingX != 0 || pixelSpacingY != 0)\r\n      // {\r\n      //   lengthTextValue = Aesthetics.AxFormatedByMM?[NSString stringWithFormat:AxFormatLengthMm, length] : [NSString stringWithFormat:AxFormatLengthCm, length];\r\n      // }else if (imagerPixelSpacingX != 0 || imagerPixelSpacingY != 0)\r\n      // {\r\n      //   lengthTextValue = AxFormatedByMM?[NSString stringWithFormat:AxFormatLengthMmImager, length] : [NSString stringWithFormat:AxFormatLengthCmImager, length];\r\n      // }else{\r\n      //   lengthTextValue = [NSString stringWithFormat:AxFormatLengthPixels, length];\r\n      // }\r\n\r\n      let valuePointX : number= startPoint.x >= endPoint.x ? (endPoint.x + (startPoint.x - endPoint.x)/2) : (startPoint.x + (endPoint.x - startPoint.x)/2);\r\n      let valuePointY : number = startPoint.y >= endPoint.y ? startPoint.y : endPoint.y;\r\n\r\n      RoiUtil.drawTextAt(context,new CGPoint(valuePointX, valuePointY),lengthTextValue);\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/roi/LinearRoiTool.ts","/**\r\n * Created by binsirMac on 2017-01-09.\r\n */\r\n\r\nimport {Roi} from \"./Roi\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {PresentationImage} from \"../display/PresentationImage\";\r\nimport {RoiUtil} from \"./RoiUtil\";\r\nimport {Aesthetics} from \"../common/Aesthetics\";\r\n\r\n\r\n/**\r\n * Created by binsirMac on 2017-01-09.\r\n */\r\nenum LinearRoiSelectType{\r\n   StartPointSelected = 0,      //the scroll browser\r\n    EndPointSelected,        //the cine browser\r\n    LinearRoiSelected,\r\n};\r\n\r\n\r\nexport class LinearRoi implements Roi{\r\n  selected : boolean = true;\r\n\r\n  startPoint:CGPoint;\r\n  endPoint:CGPoint;\r\n  private length:number;\r\n  private selectedRoiType:LinearRoiSelectType;\r\n  private clickOnLinearPoint:CGPoint;\r\n\r\n\r\n  constructor(startPoint:CGPoint,endPoint:CGPoint,length:number){\r\n    this.startPoint = startPoint;\r\n    this.endPoint = endPoint;\r\n    this.length = length;\r\n  }\r\n\r\n  checkSelectedWithPoint(pointInLens : CGPoint, presentationImage : PresentationImage){\r\n    let startPointInLens:CGPoint = presentationImage.convertFromOriginalImageToLens(this.startPoint);\r\n\r\n    let endPointInLens:CGPoint = presentationImage.convertFromOriginalImageToLens(this.endPoint);\r\n\r\n    if (Math.abs(pointInLens.x - startPointInLens.x) + Math.abs(pointInLens.y - startPointInLens.y) < Aesthetics.AxRoiSelectedRadius) {\r\n      this.selectedRoiType = LinearRoiSelectType.StartPointSelected;\r\n      return true;\r\n    }else if (Math.abs(pointInLens.x - endPointInLens.x) + Math.abs(pointInLens.y - endPointInLens.y) < Aesthetics.AxRoiSelectedRadius) {\r\n      this.selectedRoiType = LinearRoiSelectType.EndPointSelected;\r\n      return true;\r\n    }else\r\n    {\r\n      //check whether select the line\r\n      // check in the linear rect\r\n      let minX:number = Math.min(startPointInLens.x, endPointInLens.x);\r\n      let maxX:number = Math.max(startPointInLens.x, endPointInLens.x);\r\n\r\n      let minY:number = Math.min(startPointInLens.y, endPointInLens.y);\r\n      let maxY:number = Math.max(startPointInLens.y, endPointInLens.y);\r\n\r\n      if (pointInLens.x < minX - 10) {\r\n        return true;\r\n      }\r\n      if (pointInLens.x > maxX + 10) {\r\n        return true;\r\n      }\r\n      if (pointInLens.y < minY - 10) {\r\n        return true;\r\n      }\r\n      if (pointInLens.y > maxY + 10) {\r\n        return true;\r\n      }\r\n      //if ((pointInLens.x >= minX && pointInLens.x <= maxX)&&(pointInLens.y >= minY && pointInLens.y <= maxY))\r\n      {\r\n        // 1.translate coordinate\r\n        let clickedPointX:number = pointInLens.x - startPointInLens.x;\r\n        let clickedPointY:number = pointInLens.y - startPointInLens.y;\r\n        // 2.compute the linear equation: Ax + By =0\r\n        let aInEquation:number = endPointInLens.y - startPointInLens.y;\r\n        let bInEquation:number = endPointInLens.x - startPointInLens.x;\r\n        // 3.compute the distance\r\n        let distant:number = Math.abs((aInEquation * clickedPointX - bInEquation * clickedPointY)/Math.sqrt(aInEquation * aInEquation + bInEquation * bInEquation));\r\n\r\n        if (distant < 10) {\r\n          this.selectedRoiType = LinearRoiSelectType.LinearRoiSelected;\r\n          this.clickOnLinearPoint = presentationImage.convertToPointInOriginalImage(pointInLens);\r\n          return true;\r\n        }\r\n      }\r\n\r\n    }\r\n    return false;\r\n  }\r\n\r\n  moveTo(pointInLens : CGPoint, presentationImage : PresentationImage){\r\n    let pointInOriginalImage:CGPoint = presentationImage.convertToPointInOriginalImage(pointInLens);\r\n    switch (this.selectedRoiType) {\r\n      case LinearRoiSelectType.StartPointSelected:\r\n        this.startPoint = pointInOriginalImage;\r\n        break;\r\n      case LinearRoiSelectType.EndPointSelected:\r\n        this.endPoint = pointInOriginalImage;\r\n        break;\r\n      case LinearRoiSelectType.LinearRoiSelected:\r\n      {\r\n        let xOffset:number = pointInOriginalImage.x - this.clickOnLinearPoint.x;\r\n        let yOffset:number = pointInOriginalImage.y - this.clickOnLinearPoint.y;\r\n        this.startPoint = new CGPoint(this.startPoint.x + xOffset, this.startPoint.y + yOffset);\r\n        this.endPoint = new CGPoint(this.endPoint.x + xOffset, this.endPoint.y + yOffset);\r\n        this.clickOnLinearPoint = pointInOriginalImage;\r\n      }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (this.selectedRoiType == LinearRoiSelectType.StartPointSelected || this.selectedRoiType == LinearRoiSelectType.EndPointSelected) {\r\n      this.length = RoiUtil.computeLengthFrom(this.startPoint,this.endPoint,presentationImage);\r\n    }\r\n  }\r\n\r\n  drawRoiOnImage(context: any, presentationImage:PresentationImage){\r\n    //1. draw the path\r\n    let startPointInLens:CGPoint = presentationImage.convertFromOriginalImageToLens(this.startPoint);\r\n    let newStartPointX:number = startPointInLens.x;//self.startPoint.x * scale - origin.x;\r\n    let newStartPointY:number = startPointInLens.y;//self.startPoint.y * scale - origin.y;\r\n\r\n    let endPointInLens:CGPoint = presentationImage.convertFromOriginalImageToLens(this.endPoint);\r\n    let newEndPointX:number = endPointInLens.x;//self.endPoint.x * scale - origin.x;\r\n    let newEndPointY:number = endPointInLens.y;//self.endPoint.y * scale - origin.y;\r\n    RoiUtil.drawLineFrom(context,startPointInLens,endPointInLens,this.selected);\r\n\r\n    //2. draw the value\r\n    let pixelSpacingX:number = presentationImage.pixelSpacingX;\r\n    let pixelSpacingY:number = presentationImage.pixelSpacingY;\r\n    let imagerPixelSpacingX:number = presentationImage.imagerPixelSpacingX;\r\n    let imagerPixelSpacingY:number = presentationImage.imagerPixelSpacingY;\r\n\r\n    let lengthTextValue:string = '';\r\n    // if (pixelSpacingX != 0 || pixelSpacingY != 0)\r\n    // {\r\n    //   lengthTextValue = Aesthetics.AxFormatedByMM?[NSString stringWithFormat:AxFormatLengthMm, length] : [NSString stringWithFormat:AxFormatLengthCm, length];\r\n    // }else if (imagerPixelSpacingX != 0 || imagerPixelSpacingY != 0)\r\n    // {\r\n    //   lengthTextValue = AxFormatedByMM?[NSString stringWithFormat:AxFormatLengthMmImager, length] : [NSString stringWithFormat:AxFormatLengthCmImager, length];\r\n    // }else{\r\n    //   lengthTextValue = [NSString stringWithFormat:AxFormatLengthPixels, length];\r\n    // }\r\n\r\n    /*\r\n     change the position to draw the value\r\n     [RoiUtil drawTextAt:CGPointMake((newStartPointX + newEndPointX)/2, (newStartPointY + newEndPointY)/2)\r\n     withValue:lengthTextValue];\r\n     */\r\n    let valuePointX:number= newStartPointX >= newEndPointX ? (newEndPointX + (newStartPointX - newEndPointX)/2) : (newStartPointX + (newEndPointX - newStartPointX)/2);\r\n    let valuePointY:number = newStartPointY >= newEndPointY ? newStartPointY : newEndPointY;\r\n\r\n    RoiUtil.drawTextAt(context,new CGPoint(valuePointX, valuePointY),lengthTextValue);\r\n\r\n    //3. draw the vertexes\r\n    if (this.selected) {\r\n      //draw the highlight start and end point\r\n      RoiUtil.drawVertiexAt(new CGPoint(newStartPointX, newStartPointY), context);\r\n\r\n      RoiUtil.drawVertiexAt(new CGPoint(newEndPointX, newEndPointY),context);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/roi/LinearRoi.ts","//import {AXISS_SERVER_ADDRESS} from \"../app/app.constants\"; //\nimport { Injectable }    from '@angular/core';\nimport { Headers, Http, Response, RequestOptions } from '@angular/http';\nimport { Observable } from 'rxjs/Rx';\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\n\nimport 'rxjs/add/operator/toPromise';\n\nimport { Hero } from '../app/hero';\n\n@Injectable()\nexport class HeroService {\n\n  //private headers = new Headers({'Content-Type': 'application/json'});\n  private heroesUrl = 'http://localhost:810/api/heroes';  // URL to web api\n\n    constructor(private http: Http) {\n     console.log(this.heroesUrl);\n     }\n\n      getHeroes(): Observable<Hero[]> {\n          console.log(this.http.get(this.heroesUrl));\n          this.http.get(this.heroesUrl).subscribe((res:Response) =>{console.log(res.json())});\n          return this.http.get(this.heroesUrl)\n                          .map(this.extractData)\n                          .catch(this.handleError);\n      }\n     create(name: string): Observable<Hero> {\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers , withCredentials:true});//cookie\n\n        return this.http.post(this.heroesUrl, { name }, options)\n                        .map(this.extractData)\n                        .catch(this.handleError);\n      }\n      private extractData(res: Response) {\n        let body = res.json();\n        return body || { };\n      }\n\n      private handleError (error: Response | any) {\n        // In a real world app, you might use a remote logging infrastructure\n        let errMsg: string;\n        if (error instanceof Response) {\n          const body = error.json() || '';\n          const err = body.error || JSON.stringify(body);\n          errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n        } else {\n          errMsg = error.message ? error.message : error.toString();\n        }\n        console.error(errMsg);\n        return Observable.throw(errMsg);\n      }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/login_DB.service.ts","import { Component, ViewChild, ElementRef  } from '@angular/core';\r\nimport {NavController, NavParams, PopoverController, ViewController, Gesture} from 'ionic-angular';\r\nimport {ImageViewer} from \"../../../components/image-viewer/ImageViewer\";\r\nimport {AXVS_SERVER_ADDRESS} from \"../../../../app/app.constants\";\r\n\r\n@Component({\r\n  selector: 'page-scope-viewer',\r\n  templateUrl: 'scope-viewer.html'\r\n})\r\nexport class ScopePopoverPage {\r\n  imageViewer : any;\r\n  studyViewer : any;\r\n  constructor(private navParams: NavParams) {\r\n    this.imageViewer = this.navParams.data.imageViewer;\r\n    this.studyViewer = this.navParams.data.studyViewer;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/study-viewer/popovers/scope-viewer/scope-viewer.ts","/**\r\n * Created by binsirMac on 2017-01-09.\r\n */\r\nexport enum ImageOperatingType{\r\n  ImageOperatingTypeZoom=0,      //the zoom operation\r\n  ImageOperatingTypePan,         //the pan operation\r\n  ImageOperatingTypeWindowLevel, //the window level Operation\r\n  ImageOperatingTypeMeasure,     //the measure operation\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/ImageOperatingType.ts","import {RoiTool} from \"./RoiTool\";\r\nimport {PresentationImage} from \"../display/PresentationImage\";\r\nimport {CGPoint} from \"../common/CGPoint\";\r\nimport {Aesthetics} from \"../common/Aesthetics\";\r\nimport {CGSize} from \"../common/CGSize\";\r\nimport {CGRect} from \"../common/CGRect\";\r\n/**\r\n * Created by kai on 15/10/2017.\r\n */\r\nexport class RoiUtil{\r\n\r\n  private static instance:RoiTool;\r\n\r\n  static setCurrentRoiTool(roiTool:RoiTool){\r\n    this.instance = roiTool;\r\n  }\r\n\r\n  static getCurrentRoiTool():RoiTool{\r\n    return this.instance;\r\n  }\r\n\r\n  static drawVertiexAt(point:any,context:CanvasRenderingContext2D):void{\r\n\r\n  }\r\n\r\n  static computeLengthFrom(startPoint:CGPoint, endPoint:CGPoint, presentationImage:PresentationImage) {\r\n    //\tshort yT, xT;\r\n    let mesureLength:number;\r\n\r\n    let pixelSpacingX:number = presentationImage.pixelSpacingX;\r\n    let pixelSpacingY:number = presentationImage.pixelSpacingY;\r\n    let imagerPixelSpacingX:number = presentationImage.imagerPixelSpacingX;\r\n    let imagerPixelSpacingY:number = presentationImage.imagerPixelSpacingY;\r\n    {\r\n      let coteA:number, coteB:number;\r\n\r\n      coteA = Math.abs(startPoint.x - endPoint.x);\r\n      coteB = Math.abs(startPoint.y - endPoint.y);\r\n\r\n      if( pixelSpacingX!= 0 && pixelSpacingY != 0)\r\n      {\r\n        coteA *= pixelSpacingX;\r\n        coteB *= pixelSpacingY;\r\n      }else if( imagerPixelSpacingX!= 0 && imagerPixelSpacingY != 0)\r\n      {\r\n        coteA *= imagerPixelSpacingX;\r\n        coteB *= imagerPixelSpacingY;\r\n      }\r\n\r\n      if( coteA == 0) mesureLength = coteB;\r\n      else if( coteB == 0) mesureLength = coteA;\r\n      else mesureLength = Math.sqrt(coteA * coteA + coteB * coteB);// coteB / (sin (atan( coteB / coteA)));\r\n\r\n      if(( pixelSpacingX != 0 && pixelSpacingY != 0 && !Aesthetics.AxFormatedByMM)||( imagerPixelSpacingX != 0 && imagerPixelSpacingY != 0 && !Aesthetics.AxFormatedByMM))\r\n      {\r\n        mesureLength /= 10.0;\r\n      }\r\n    }\r\n    return mesureLength;\r\n  }\r\n\r\n  static drawLineFrom(context: any,startPoint:CGPoint,endPoint:CGPoint,selected:boolean){\r\n    if (selected) {\r\n      context.lineWidth = Aesthetics.AxRoiSelectedLineWidth;\r\n    }else{\r\n      context.lineWidth = Aesthetics.AxRoiUnselectedLineWidth;\r\n    }\r\n    context.moveTo(startPoint.x, startPoint.y);\r\n    context.lineTo(startPoint.x, startPoint.y);\r\n\r\n    context.stroke();\r\n  }\r\n\r\n  static drawTextAt(context:any,point:CGPoint,value:string){\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/roi/RoiUtil.ts","import {CGSize} from \"./CGSize\";\r\nimport {CGPoint} from \"./CGPoint\";\r\n/**\r\n * Created by binsirMac on 2016-12-26.\r\n */\r\nexport class CGRect {\r\n  public size: CGSize;\r\n  public origin: CGPoint;\r\n\r\n  constructor(public x: number, public y: number, public width: number, public height: number) {\r\n    this.size = new CGSize(width, height);\r\n    this.origin = new CGPoint(x, y);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/CGRect.ts","/**\r\n * Created by kai on 20/10/2017.\r\n */\r\n\r\nexport class Aesthetics{\r\n  static AxRoiSelectedRadius:number = 2.0;\r\n  static AxFormatedByMM:boolean = false;\r\n\r\n  static AxRoiUnselectedLineWidth:number         = 2.0;\r\n  static AxRoiSelectedLineWidth:number           = 3.0;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/image-viewer/common/Aesthetics.ts"],"sourceRoot":""}